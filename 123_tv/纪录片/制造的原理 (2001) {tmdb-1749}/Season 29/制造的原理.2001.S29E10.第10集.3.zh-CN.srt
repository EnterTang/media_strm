1
00:00:00,040 --> 00:00:01,090
继续讲课

2
00:00:03,520 --> 00:00:06,860
这里再讲一下这个PTS的一个

3
00:00:06,870 --> 00:00:07,440
概念

4
00:00:07,450 --> 00:00:10,140
其实PTS就是说显示时间错

5
00:00:10,610 --> 00:00:13,560
就是告诉播放器该在什么时候

6
00:00:13,570 --> 00:00:15,320
显示这一帧的数据

7
00:00:15,750 --> 00:00:19,140
其实这一个pps呢是在录制的

8
00:00:19,150 --> 00:00:20,280
时候打上去了

9
00:00:20,290 --> 00:00:21,370
大家一定要明白

10
00:00:21,410 --> 00:00:23,020
就说pps是怎么来的

11
00:00:23,030 --> 00:00:26,620
呢他是在音频和视频录制的时候

12
00:00:26,660 --> 00:00:28,800
才把这个时间敲打上去了

13
00:00:31,030 --> 00:00:32,040
大家明白了没有

14
00:00:32,050 --> 00:00:34,150
这个pps的由来

15
00:00:40,490 --> 00:00:42,890
这里DTS我们就不做过

16
00:00:43,590 --> 00:00:44,690
多了一个讲解

17
00:00:44,730 --> 00:00:47,390
因为今天讲的音视频同步跟

18
00:00:47,400 --> 00:00:49,970
tts的概念不是很相关

19
00:00:50,620 --> 00:00:53,990
大家可以找前面两期的视频听

20
00:00:54,000 --> 00:00:54,950
一下就可以了

21
00:00:57,670 --> 00:01:00,000
我们再讲一下这个FF和

22
00:01:00,010 --> 00:01:01,820
iPad中的一个时间单位

23
00:01:02,120 --> 00:01:04,010
这个是非常重要的

24
00:01:04,180 --> 00:01:06,930
但是当然了这一个不需要讲太多

25
00:01:06,940 --> 00:01:07,730
时间

26
00:01:07,980 --> 00:01:10,730
因为这些知识啊都是固定的

27
00:01:10,920 --> 00:01:13,550
也是在FFEA派口中才有这种

28
00:01:13,560 --> 00:01:14,530
时间肌肉

29
00:01:14,680 --> 00:01:16,890
就说它固定是多少是FF的

30
00:01:16,900 --> 00:01:18,980
iPad内部已经规定了

31
00:01:19,260 --> 00:01:22,740
当然了在安卓或者其他系统里面

32
00:01:22,920 --> 00:01:25,770
也有这种时间单位的一个转换

33
00:01:25,780 --> 00:01:26,750
或者定义

34
00:01:27,340 --> 00:01:29,290
只是说不同的框架

35
00:01:29,300 --> 00:01:30,860
不同的多媒体框架

36
00:01:30,920 --> 00:01:33,350
它这个时间单位有可能有一定的

37
00:01:33,360 --> 00:01:34,030
区别

38
00:01:34,970 --> 00:01:37,160
大家主要是稍微了解就可以了

39
00:01:39,660 --> 00:01:42,710
那比如我们讲了这个AB太

40
00:01:42,720 --> 00:01:43,370
bass

41
00:01:43,480 --> 00:01:46,480
就是说S1iPad中的一个

42
00:01:46,490 --> 00:01:47,990
内部计时单位

43
00:01:49,100 --> 00:01:52,800
其实他这里就是啊这打多了一个

44
00:01:53,210 --> 00:01:54,170
哦不是

45
00:01:54,210 --> 00:01:55,070
是这样子

46
00:01:55,110 --> 00:01:57,380
一千这里就是100万

47
00:01:58,420 --> 00:02:01,030
这里其实是一个微秒的一个单位

48
00:02:01,040 --> 00:02:03,880
来了就是说一秒除以100万

49
00:02:03,890 --> 00:02:05,720
那就是一个微妙的一个单位

50
00:02:06,980 --> 00:02:10,530
像这个av台被10Q其实它

51
00:02:10,540 --> 00:02:13,130
就是av太bass的一个倒数

52
00:02:13,140 --> 00:02:16,340
唉这些反正就是记者就好了

53
00:02:16,350 --> 00:02:18,330
用到时候看一下就可以了

54
00:02:19,230 --> 00:02:21,700
到时候大家如果不记得这是什么

55
00:02:21,740 --> 00:02:22,260
概念

56
00:02:22,270 --> 00:02:24,620
那就找这个视频再看一下

57
00:02:24,710 --> 00:02:26,920
对着这个文字看一下就可以了

58
00:02:29,410 --> 00:02:31,540
然后我们看一下这个时间期的

59
00:02:31,550 --> 00:02:32,260
一个转换

60
00:02:32,270 --> 00:02:37,030
就是说我外部设了一个秒数进来

61
00:02:37,040 --> 00:02:39,810
我要转转成FF的iPad内部

62
00:02:39,820 --> 00:02:40,950
的一个时间单位

63
00:02:40,960 --> 00:02:42,730
那我应该怎么去表示

64
00:02:42,740 --> 00:02:46,550
呢其实他就是描述乘上这个av

65
00:02:46,560 --> 00:02:47,930
太贝斯就可以了

66
00:02:48,880 --> 00:02:51,550
那如果是FF iPad内部的

67
00:02:51,560 --> 00:02:52,510
一个变量

68
00:02:52,560 --> 00:02:54,770
我要怎么转换成一个秒

69
00:02:54,780 --> 00:02:57,570
呢我们也是可以根据这个公式就

70
00:02:57,580 --> 00:02:58,150
可以了

71
00:02:58,650 --> 00:03:02,420
说这个太skype要成以上

72
00:03:02,430 --> 00:03:05,540
这个av太bassQ就可以了

73
00:03:06,440 --> 00:03:08,050
应该大家应该很容易理解这个

74
00:03:08,060 --> 00:03:08,750
公式

75
00:03:10,080 --> 00:03:12,940
当然这个公司如果不理解也可以

76
00:03:13,370 --> 00:03:14,760
自己看到视频后

77
00:03:14,770 --> 00:03:17,340
我们下次讲课的时候大家可以提

78
00:03:17,350 --> 00:03:17,850
一下

79
00:03:19,900 --> 00:03:20,350
好

80
00:03:20,360 --> 00:03:22,390
我们再看一下这个FF1

81
00:03:22,400 --> 00:03:23,930
iPad中的一个av类型

82
00:03:23,940 --> 00:03:28,280
呢这一个是经常看得到

83
00:03:30,130 --> 00:03:32,520
其实这个就是表示一个分子一个

84
00:03:32,530 --> 00:03:33,670
分母唉这种

85
00:03:34,300 --> 00:03:36,690
就是说表示多少分之一这样子

86
00:03:36,700 --> 00:03:37,640
一个概念

87
00:03:38,410 --> 00:03:41,340
其实这里有什么作用呢

88
00:03:41,770 --> 00:03:43,530
等下我们讲开背时的时候

89
00:03:43,540 --> 00:03:45,560
我们再仔细的讲解一下

90
00:03:47,740 --> 00:03:48,390
好

91
00:03:48,440 --> 00:03:51,870
再看一下这个时间就要计算时间

92
00:03:51,880 --> 00:03:52,630
戳勒

93
00:03:53,380 --> 00:03:56,140
就说比如我们拿到一个pps

94
00:03:56,550 --> 00:03:59,470
怎么技术转换成一个秒的单位

95
00:03:59,690 --> 00:04:04,200
那我们就乘以这个使君AA10

96
00:04:04,210 --> 00:04:06,070
军的一个台贝斯就可以了

97
00:04:06,320 --> 00:04:07,310
这个是st

98
00:04:07,320 --> 00:04:10,470
啊st这个其实是AV史俊的

99
00:04:12,630 --> 00:04:14,610
大家记一下这种公式就好了

100
00:04:16,170 --> 00:04:19,140
也要计算这个珍藏也是一样道理

101
00:04:19,150 --> 00:04:19,290
的

102
00:04:20,330 --> 00:04:21,550
这丢来损

103
00:04:23,680 --> 00:04:25,770
但这里呢大家要注意一下不同

104
00:04:25,780 --> 00:04:29,070
时间七的一个转换试用这个试用

105
00:04:29,120 --> 00:04:32,520
这个AV下划线list

106
00:04:33,070 --> 00:04:36,020
S tell下划线Q这一个

107
00:04:36,030 --> 00:04:36,860
函数

108
00:04:39,750 --> 00:04:42,820
这种固定的东西我们就不讲那么

109
00:04:42,830 --> 00:04:43,080
多

110
00:04:43,090 --> 00:04:44,880
吧我们主要是讲音视频的一个

111
00:04:44,890 --> 00:04:45,520
原理

112
00:04:45,940 --> 00:04:48,930
然后以备大家在不同的播放器

113
00:04:48,970 --> 00:04:52,530
或者在不同的框架中的时候

114
00:04:52,540 --> 00:04:54,530
我们都知道它这个原理是怎么去

115
00:04:54,540 --> 00:04:55,310
操作的

116
00:04:56,410 --> 00:04:59,120
因为现在讲到这个台北市是FF

117
00:04:59,130 --> 00:05:00,810
原配葛系有

118
00:05:03,900 --> 00:05:04,350
好

119
00:05:04,360 --> 00:05:06,910
我们再看一下不同结构体的一个

120
00:05:06,920 --> 00:05:08,430
台北市以及丢勒笋

121
00:05:10,660 --> 00:05:14,620
其实在这个av风脉txt这里

122
00:05:14,630 --> 00:05:16,660
这个丢泪水呢是以AB太

123
00:05:16,670 --> 00:05:17,400
bass

124
00:05:17,700 --> 00:05:19,900
就说为单位大家要注意一下

125
00:05:21,610 --> 00:05:24,160
然后这个AV史俊呢台ps其实

126
00:05:24,170 --> 00:05:25,600
它并不是固定的

127
00:05:27,360 --> 00:05:28,510
大家也要注意一下

128
00:05:28,520 --> 00:05:31,050
只是说他这个单位其实也是说是

129
00:05:31,060 --> 00:05:31,730
一个秒

130
00:05:33,630 --> 00:05:34,670
这个调来损

131
00:05:34,810 --> 00:05:37,520
因为使用这个BS也是以av

132
00:05:37,530 --> 00:05:39,220
使用的胎被视为单位的

133
00:05:41,410 --> 00:05:43,500
这些我们还是继续讲快一点

134
00:05:43,510 --> 00:05:46,730
吧av是觉得太被屎

135
00:05:46,770 --> 00:05:49,400
就说他是怎么去设置

136
00:05:49,440 --> 00:05:50,500
它是不是固定了

137
00:05:50,510 --> 00:05:53,720
我们可以根据我这里列的去查找

138
00:05:53,730 --> 00:05:54,230
一下

139
00:05:55,170 --> 00:05:59,460
比如天使流一般就是说是90K

140
00:05:59,500 --> 00:06:00,370
分之一

141
00:06:01,980 --> 00:06:03,730
F lv我们一般都是

142
00:06:03,740 --> 00:06:04,610
11000

143
00:06:04,650 --> 00:06:07,470
但是对于mp4这个太bass

144
00:06:07,480 --> 00:06:08,630
是可以设的

145
00:06:10,410 --> 00:06:12,940
具体的在我们以后我们讲录制的

146
00:06:12,950 --> 00:06:13,700
课程的时候

147
00:06:13,710 --> 00:06:16,860
我们再具体讲一下这个mp4的

148
00:06:16,870 --> 00:06:18,430
一个台贝斯的一个情况

149
00:06:18,850 --> 00:06:21,440
大家但是如果自己想自己去看的

150
00:06:21,450 --> 00:06:21,640
话

151
00:06:21,650 --> 00:06:24,910
就我们后面这个是在就是I

152
00:06:24,920 --> 00:06:26,150
 fm拍口中

153
00:06:26,440 --> 00:06:27,650
是哪一个文件

154
00:06:27,660 --> 00:06:29,770
大家可以根据这个文件名去查找

155
00:06:29,780 --> 00:06:30,190
一下

156
00:06:31,240 --> 00:06:31,940
好

157
00:06:31,980 --> 00:06:33,780
我们这个就讲到这里

158
00:06:33,990 --> 00:06:36,180
我们再看一下这个这两个比较

159
00:06:36,190 --> 00:06:36,900
重要的

160
00:06:37,180 --> 00:06:38,900
一个就是av pet

161
00:06:39,180 --> 00:06:40,510
一个是av分

162
00:06:40,740 --> 00:06:43,610
这一个在FM派格的一个二次

163
00:06:43,620 --> 00:06:44,380
开发中

164
00:06:44,480 --> 00:06:47,790
是经常跟这两个结构体打交道了

165
00:06:48,140 --> 00:06:50,250
所以大家一定要大家一定要知道

166
00:06:50,260 --> 00:06:53,430
这个pps以及这个丢雷笋是

167
00:06:53,440 --> 00:06:55,490
怎么计算出秒的

168
00:06:55,500 --> 00:06:58,750
就说因为他这种pps或丢雷笋

169
00:06:58,760 --> 00:07:00,530
他这个单位不一定是秒

170
00:07:00,600 --> 00:07:03,410
但是你在做一个视频同步的时候

171
00:07:03,580 --> 00:07:05,770
最后是要把它转换为秒

172
00:07:06,870 --> 00:07:08,400
我不知道大家理解了没有

173
00:07:08,410 --> 00:07:11,410
就是说我们这件视频同步的时候

174
00:07:11,450 --> 00:07:15,350
是要把这种就不同的时间机都是

175
00:07:15,360 --> 00:07:17,960
要转换成秒去做同步

176
00:07:21,230 --> 00:07:24,010
当然了就是说你在不同的框架

177
00:07:24,050 --> 00:07:25,230
框架下

178
00:07:25,540 --> 00:07:27,610
可能也有一些不同

179
00:07:28,140 --> 00:07:30,910
比如我们以前做机顶盒的时候

180
00:07:31,210 --> 00:07:35,440
他那个时间机一直都是以90K

181
00:07:35,450 --> 00:07:36,810
或只为单位的

182
00:07:37,650 --> 00:07:40,550
因为以前我们主要是做ts流

183
00:07:40,560 --> 00:07:43,070
A水就是固定为九九十

184
00:07:43,080 --> 00:07:45,200
K做到90K分之一

185
00:07:47,510 --> 00:07:47,840
好

186
00:07:47,850 --> 00:07:54,990
我们再看下面吧这里讲ps怎么

187
00:07:55,000 --> 00:07:56,090
转换成秒

188
00:07:56,450 --> 00:07:58,500
大家可以看一下这个函数就可以

189
00:07:58,510 --> 00:07:58,740
了

190
00:07:58,910 --> 00:08:03,050
这里是从FFK里面摘抄出来的

191
00:08:04,350 --> 00:08:06,520
然后大家看一下这个台北市的

192
00:08:06,530 --> 00:08:07,550
一个转换

193
00:08:08,130 --> 00:08:11,080
也可以参考一下FF play

194
00:08:11,090 --> 00:08:12,800
中的一个代码

195
00:08:13,010 --> 00:08:16,520
这里这一部分也是从FFFF类

196
00:08:16,560 --> 00:08:17,580
摘抄出来的

197
00:08:17,930 --> 00:08:19,660
这些固定的东西还是少讲

198
00:08:19,670 --> 00:08:20,590
吧我们继续

199
00:08:22,200 --> 00:08:22,850
好

200
00:08:22,890 --> 00:08:25,450
我们主要是讲到今晚的一个主要

201
00:08:25,460 --> 00:08:26,880
的课题了

202
00:08:26,890 --> 00:08:29,060
就是说音视频同步的一个原理

203
00:08:29,070 --> 00:08:32,590
刚才我们只是简单过了一下fc

204
00:08:32,600 --> 00:08:33,870
 I take中的一个一些

205
00:08:33,880 --> 00:08:35,330
时间机的一个转换

206
00:08:35,500 --> 00:08:37,800
刚才那些知识都是比较固定

207
00:08:38,270 --> 00:08:41,420
现在我们就要带着问题去理解

208
00:08:41,430 --> 00:08:42,700
这个同步原理了

209
00:08:43,680 --> 00:08:48,080
是就比如FFK里面它是重新

210
00:08:48,090 --> 00:08:49,580
封装了这个av

211
00:08:49,590 --> 00:08:50,080
否认

212
00:08:50,400 --> 00:08:52,800
他为什么要做重新封装呢

213
00:08:53,060 --> 00:08:54,610
因为I be Free里面的

214
00:08:54,620 --> 00:08:56,800
pps以及它的丢雷笋

215
00:08:57,030 --> 00:08:58,920
并不单位并不是秒的

216
00:08:59,110 --> 00:09:02,160
但是我们在这里做音视频同步的

217
00:09:02,170 --> 00:09:02,460
时候

218
00:09:02,470 --> 00:09:04,420
我们要转换成一个秒的单位

219
00:09:04,630 --> 00:09:07,160
所以这里就有了两个变量

220
00:09:07,170 --> 00:09:09,540
一个是double碰到一个

221
00:09:09,860 --> 00:09:11,390
double类型的一个pps

222
00:09:11,400 --> 00:09:12,730
1级double类型的一个U

223
00:09:12,740 --> 00:09:13,180
内训

224
00:09:14,630 --> 00:09:16,880
这个两个都是以秒为单位

225
00:09:19,430 --> 00:09:20,680
我们再看下面的

226
00:09:22,310 --> 00:09:25,510
大家可以看一下这两张图

227
00:09:25,550 --> 00:09:29,650
就说我这段时间鸡是怎么做转换

228
00:09:29,660 --> 00:09:31,230
呢在FF类里面

229
00:09:31,580 --> 00:09:33,520
它是怎么去做一个转换

230
00:09:34,270 --> 00:09:38,330
本来在APPT的他这个拍

231
00:09:38,340 --> 00:09:38,870
bass

232
00:09:38,920 --> 00:09:41,250
其实就说它这个pps就是一个

233
00:09:41,260 --> 00:09:42,460
abc用的派贝斯

234
00:09:42,910 --> 00:09:45,640
然后他是把这个包插到一个队列

235
00:09:45,650 --> 00:09:46,200
里面

236
00:09:46,350 --> 00:09:49,100
队列里面呢就是说由这个解码

237
00:09:49,110 --> 00:09:50,420
县城去拿

238
00:09:50,430 --> 00:09:51,300
一结束出来

239
00:09:51,540 --> 00:09:53,480
拿一张数据出来解码

240
00:09:53,520 --> 00:09:56,010
解完码后得到一珍AA赴任

241
00:09:56,050 --> 00:10:00,010
AA否认这个时候他的单位还是

242
00:10:00,020 --> 00:10:01,870
一个ap使用的胎bass

243
00:10:01,880 --> 00:10:05,010
但他在这个时候做了一个胎贝斯

244
00:10:05,020 --> 00:10:06,580
的一个转换

245
00:10:07,240 --> 00:10:11,250
它要转换成一个一个就是说采用

246
00:10:11,260 --> 00:10:13,120
利分之一的一个单位

247
00:10:15,340 --> 00:10:18,530
我们再看一下这个这里呢转换成

248
00:10:18,540 --> 00:10:19,080
秒

249
00:10:19,970 --> 00:10:21,000
转换成秒

250
00:10:21,010 --> 00:10:23,360
他在插入的这个真队列里面

251
00:10:23,410 --> 00:10:25,380
为后面我们做同步的时候

252
00:10:25,390 --> 00:10:28,930
就直接拿出这一个复印就是四秒

253
00:10:28,940 --> 00:10:29,390
的单位

254
00:10:29,400 --> 00:10:31,330
我们就可以去做同步了

255
00:10:33,030 --> 00:10:36,220
我们再看一下这个视频视频也是

256
00:10:36,230 --> 00:10:37,520
基本上一样了

257
00:10:37,970 --> 00:10:40,000
其实也是这里把这个AB太

258
00:10:40,010 --> 00:10:41,740
bass最后转化成一个秒的

259
00:10:41,750 --> 00:10:42,310
单位

260
00:10:42,700 --> 00:10:45,840
所以大家这一个稍微理解一下就

261
00:10:45,850 --> 00:10:46,280
可以了

262
00:10:46,290 --> 00:10:49,310
就说一定要记住这一个就好了

263
00:10:49,320 --> 00:10:51,640
就说我最后做同步的时候

264
00:10:51,730 --> 00:10:53,520
它这个单位是秒来的

265
00:10:53,570 --> 00:10:55,510
大家一定要注意一下

266
00:10:56,570 --> 00:10:59,260
否则我们可能自己看代码的时候

267
00:10:59,270 --> 00:11:03,630
又去研究说啊我这个可口就盖章

268
00:11:03,640 --> 00:11:05,900
的这个可口是秒还是什么单

269
00:11:05,950 --> 00:11:06,990
还是微苗

270
00:11:07,030 --> 00:11:12,980
或者还是其它单位啊有没有滚动

271
00:11:13,020 --> 00:11:14,460
地图的视频

272
00:11:15,290 --> 00:11:16,920
我不是很明白

273
00:11:17,170 --> 00:11:18,140
来悲情

274
00:11:18,150 --> 00:11:19,600
先请这位朋友

275
00:11:19,810 --> 00:11:23,110
我不太明白你这一个说到是什么

276
00:11:23,120 --> 00:11:23,910
意思

277
00:11:24,270 --> 00:11:27,010
就是说滚动地图的视频

278
00:11:28,720 --> 00:11:31,450
你是说有没有往期的视频呢还是

279
00:11:38,020 --> 00:11:38,510
好

280
00:11:38,550 --> 00:11:40,290
那我们先再往下面讲

281
00:11:40,300 --> 00:11:49,440
吧我们这里先讲一下噢以前的

282
00:11:49,450 --> 00:11:51,380
视频上以前的视频

283
00:11:51,390 --> 00:11:53,220
你可以找佳佳老师要

284
00:11:54,040 --> 00:11:57,290
因为讲这个音视频同步之前

285
00:11:57,580 --> 00:12:00,110
我们之前有讲过两节

286
00:12:00,120 --> 00:12:01,910
就说更为基础的课程

287
00:12:02,560 --> 00:12:04,510
如果之前没有听课

288
00:12:04,520 --> 00:12:06,830
现在直接听这个音视频

289
00:12:07,200 --> 00:12:09,210
就说如果以前你没怎么学音视频

290
00:12:09,220 --> 00:12:09,490
的话

291
00:12:09,500 --> 00:12:11,860
现在直接接听这个音视频同步

292
00:12:11,900 --> 00:12:13,740
可能会难理解一点

293
00:12:15,680 --> 00:12:16,930
那我们再看一下

294
00:12:16,940 --> 00:12:19,410
就说我这一个pps的一个计算

295
00:12:20,930 --> 00:12:23,680
大家可能我这个我还是对着代码

296
00:12:23,690 --> 00:12:24,980
稍微讲解一下

297
00:12:25,780 --> 00:12:29,130
因为这里讲的话是因为怎么说

298
00:12:29,140 --> 00:12:32,970
呢它是调用了一些函数

299
00:12:33,010 --> 00:12:35,330
为了获取就说更准确的一个

300
00:12:35,340 --> 00:12:36,070
pps

301
00:12:38,490 --> 00:12:40,500
我给大家稍微看一下代码

302
00:13:00,300 --> 00:13:01,320
我们可以看一下

303
00:13:01,330 --> 00:13:04,450
就是说他这里截一帧数据

304
00:13:04,640 --> 00:13:06,990
它本身在这个解码器里面

305
00:13:07,000 --> 00:13:09,670
其实它也是有把这个ps1京

306
00:13:09,680 --> 00:13:10,250
复职

307
00:13:10,260 --> 00:13:13,840
噢但是他这里呢就调用了这一个

308
00:13:13,850 --> 00:13:14,500
函数

309
00:13:14,550 --> 00:13:17,280
A be Free跟get带

310
00:13:17,290 --> 00:13:19,270
CFO test

311
00:13:19,810 --> 00:13:21,210
test apple

312
00:13:21,400 --> 00:13:22,610
意思是说

313
00:13:22,820 --> 00:13:26,510
他要通过一些方式去获取一个

314
00:13:26,520 --> 00:13:28,430
更为准确的pps

315
00:13:29,600 --> 00:13:32,050
当然这一个函数这里要时间大家

316
00:13:32,060 --> 00:13:33,170
自己去看一下

317
00:13:33,180 --> 00:13:36,510
吧这个因为比较其实不是非常好

318
00:13:36,520 --> 00:13:37,280
理解

319
00:13:37,330 --> 00:13:40,170
大家可能提一个方向

320
00:13:40,180 --> 00:13:42,580
吧就是说比如你这个视频中间有

321
00:13:42,590 --> 00:13:44,200
一些丢帧的情况

322
00:13:44,560 --> 00:13:47,710
他可能去考虑这个说就是说考虑

323
00:13:47,720 --> 00:13:49,720
这个视频真有没有丢帧

324
00:13:49,860 --> 00:13:51,450
或者这个视频真是不是

325
00:13:51,460 --> 00:13:53,510
有时候它的值不太对

326
00:13:54,510 --> 00:13:57,080
这个是在什么情况有发生

327
00:13:57,090 --> 00:14:01,040
呢以前我们在做天使流流播放的

328
00:14:01,050 --> 00:14:01,590
时候

329
00:14:01,630 --> 00:14:04,390
比如电视信号不是很稳定的时候

330
00:14:04,430 --> 00:14:07,700
我们室友发现它中间有些PTS

331
00:14:07,710 --> 00:14:08,640
是有错的

332
00:14:09,670 --> 00:14:13,020
所以它就要经过就说要经过前一

333
00:14:13,030 --> 00:14:15,510
针跟后遗症钱一针

334
00:14:15,910 --> 00:14:18,680
加这个帧率可能再去推导一下

335
00:14:18,690 --> 00:14:27,130
这个PTS好

336
00:14:27,140 --> 00:14:29,810
我们这里看到PTS号噢叫V点

337
00:14:29,820 --> 00:14:31,590
了一个pps的一个获取

338
00:14:32,390 --> 00:14:34,620
我们再看一下audio

339
00:14:39,990 --> 00:14:42,800
我们再看一下ODOaudio

340
00:14:42,810 --> 00:14:43,480
的pps

341
00:14:43,490 --> 00:14:45,360
呢我们可以稍微看一下

342
00:14:54,780 --> 00:14:56,970
其实大家可以对着大脑看一下就

343
00:14:56,980 --> 00:14:57,380
好了

344
00:14:57,930 --> 00:15:00,550
这一部分我就不想讲太多

345
00:15:00,590 --> 00:15:01,890
因为都是固定的

346
00:15:05,730 --> 00:15:08,250
但对这一个就说这个太bass

347
00:15:08,290 --> 00:15:10,880
制作pps的一个时间单位的

348
00:15:10,890 --> 00:15:11,500
一个转换

349
00:15:11,510 --> 00:15:13,140
大家可以稍微留意一下

350
00:15:13,810 --> 00:15:15,780
他是怎么做一个时间单位的一个

351
00:15:15,790 --> 00:15:16,440
转换的

352
00:15:17,070 --> 00:15:19,660
当然最后都是要转换成一个秒

353
00:15:23,960 --> 00:15:24,430
好

354
00:15:24,440 --> 00:15:27,730
我们先来讲一下这个同步时钟

355
00:15:27,740 --> 00:15:28,530
这个问题

356
00:15:29,680 --> 00:15:31,990
我这里画了一张图

357
00:15:32,000 --> 00:15:34,890
就是说大家可以稍微先看一下这

358
00:15:34,900 --> 00:15:35,480
张图

359
00:15:37,230 --> 00:15:39,210
稍微自己先理解一下

360
00:15:40,400 --> 00:15:42,430
我讲的这个说时间轴

361
00:15:42,480 --> 00:15:45,110
就说你不管是哪一种同步方式

362
00:15:45,180 --> 00:15:48,250
你都是需要去维护一个时钟

363
00:15:48,260 --> 00:15:50,860
呢只是说以谁为基准

364
00:15:50,910 --> 00:15:53,710
那就谁可以去设这个时钟

365
00:15:54,340 --> 00:15:57,270
其他呢其他都只能去get这个

366
00:15:57,280 --> 00:15:57,960
时钟

367
00:15:58,230 --> 00:16:00,760
比如我们刚才讲的以audio

368
00:16:00,770 --> 00:16:01,430
为基准

369
00:16:01,470 --> 00:16:04,580
那只有audio有就说有权限

370
00:16:04,590 --> 00:16:06,100
去设这个时钟

371
00:16:06,710 --> 00:16:09,280
media叫视频只能去get

372
00:16:09,290 --> 00:16:10,930
这个始终做一个参考

373
00:16:12,460 --> 00:16:14,590
我不知道大家对这张图有没有

374
00:16:14,600 --> 00:16:15,640
一些疑问

375
00:16:18,880 --> 00:16:20,450
那我就去先继续讲

376
00:16:20,460 --> 00:16:23,430
吧就说FFA里面它这个时间轴

377
00:16:23,440 --> 00:16:26,780
是通过这通过这个AB get

378
00:16:26,790 --> 00:16:28,250
 it if

379
00:16:28,940 --> 00:16:32,130
这个函数获取到了这是这一个是

380
00:16:32,140 --> 00:16:33,230
线性增加了

381
00:16:33,240 --> 00:16:35,890
这一个函数的时间是线性增加的

382
00:16:36,300 --> 00:16:39,270
相当于它这个函数维系着一个

383
00:16:39,280 --> 00:16:40,290
时间轴

384
00:16:41,270 --> 00:16:42,880
那我先讲一下

385
00:16:42,890 --> 00:16:46,070
吧就是说比如这上面这个基准

386
00:16:46,080 --> 00:16:47,530
时间是audio了

387
00:16:47,540 --> 00:16:48,570
我就打个比方而已

388
00:16:48,910 --> 00:16:50,570
比如说这里是audio了

389
00:16:50,610 --> 00:16:52,770
他ODL是pps

390
00:16:52,810 --> 00:16:55,340
就说哪个APS这里是他的

391
00:16:55,350 --> 00:16:56,160
pps

392
00:16:56,860 --> 00:16:59,930
这个时候pps行转换成一个秒

393
00:16:59,940 --> 00:17:00,750
的单位了

394
00:17:01,550 --> 00:17:04,680
那我拿到这个PTS以我为基准

395
00:17:04,720 --> 00:17:07,820
那我就有权利去设置这个时钟

396
00:17:08,680 --> 00:17:09,400
好

397
00:17:09,450 --> 00:17:11,230
我们可以看看到

398
00:17:11,280 --> 00:17:14,020
比如我这个拿到这个pps1

399
00:17:14,190 --> 00:17:16,140
我要把这个使用射进来

400
00:17:16,840 --> 00:17:18,700
我筛厂出口后

401
00:17:19,210 --> 00:17:20,620
市怎么射进来的

402
00:17:20,630 --> 00:17:21,540
这个是开一

403
00:17:21,550 --> 00:17:24,000
就说这个时候是胎

404
00:17:24,260 --> 00:17:27,710
然后我是怎么去算这个相对时间

405
00:17:27,720 --> 00:17:27,810
的

406
00:17:27,820 --> 00:17:31,770
呢我就通过这个PTS1减去

407
00:17:31,780 --> 00:17:32,830
这个胎

408
00:17:33,060 --> 00:17:34,730
得到一个ps机

409
00:17:35,320 --> 00:17:35,930
架子

410
00:17:36,990 --> 00:17:39,540
要得到这个相对的一个时间

411
00:17:39,920 --> 00:17:41,350
大家可以稍微这么理解

412
00:17:41,360 --> 00:17:43,520
就说我得到一个相对的时间

413
00:17:43,890 --> 00:17:46,890
然后我这个video来去读

414
00:17:46,900 --> 00:17:48,490
这个时钟的时候

415
00:17:48,680 --> 00:17:50,150
他拿到什么东西

416
00:17:50,160 --> 00:17:51,990
呢我们可以稍微看一下

417
00:17:53,430 --> 00:17:55,480
就说这个这里是胎要

418
00:17:55,660 --> 00:17:58,730
他要其实跟他是有一个丢泪水的

419
00:17:58,740 --> 00:17:59,630
一个操作

420
00:18:00,550 --> 00:18:02,780
我们看我们这个时间是怎么获取

421
00:18:02,790 --> 00:18:03,070
的

422
00:18:04,070 --> 00:18:06,950
我们通过这个颜色去看

423
00:18:07,790 --> 00:18:11,120
就说这个pps这个相对时间差

424
00:18:11,130 --> 00:18:14,060
是早点这里设进去了

425
00:18:14,070 --> 00:18:16,140
是PTS1射进去了

426
00:18:16,350 --> 00:18:18,220
但我过了一个段时间

427
00:18:18,230 --> 00:18:19,340
就是他要的时候

428
00:18:19,350 --> 00:18:22,000
我才拿着一个时间以后

429
00:18:24,000 --> 00:18:25,490
加上这个太傲

430
00:18:26,830 --> 00:18:30,360
大家可以看一下这个做FF类它

431
00:18:30,370 --> 00:18:31,490
是这么做的

432
00:18:31,630 --> 00:18:33,860
他这样子做后它有什么用

433
00:18:34,190 --> 00:18:36,040
我们再换算一下

434
00:18:36,050 --> 00:18:39,560
就是说本来你这我这一个pps

435
00:18:39,600 --> 00:18:41,490
像这个相对时间差

436
00:18:41,500 --> 00:18:44,190
我换算成一个pps1以后

437
00:18:44,200 --> 00:18:45,690
减去这个太一

438
00:18:45,800 --> 00:18:54,060
因为这一段话一下吧这这一部分

439
00:18:57,970 --> 00:18:59,390
大家可以看一下

440
00:19:02,770 --> 00:19:04,880
然后再我们再换算一下

441
00:19:04,890 --> 00:19:07,770
就是说我这个时候我换算成一个

442
00:19:07,820 --> 00:19:08,580
胎药

443
00:19:17,620 --> 00:19:20,310
就说他这里是减一个加我再换三

444
00:19:20,320 --> 00:19:22,320
层这个太一减胎

445
00:19:22,530 --> 00:19:26,270
那就是他要减胎他要减胎就是

446
00:19:26,320 --> 00:19:27,580
得出这个丢雷笋

447
00:19:27,840 --> 00:19:28,950
呐这个ps

448
00:19:28,960 --> 00:19:31,840
呢其实他这个时候我们就很容易

449
00:19:31,850 --> 00:19:32,440
看得到

450
00:19:32,450 --> 00:19:34,980
我再去跟这个时间走的时候是

451
00:19:35,020 --> 00:19:38,500
跌到这个ODODSE然后加上

452
00:19:38,510 --> 00:19:40,420
这个时间走走的时间

453
00:19:40,880 --> 00:19:42,910
我不知道大家有没有明白这个

454
00:19:42,920 --> 00:19:46,750
就是说我为什么非得要能去读

455
00:19:46,760 --> 00:19:47,070
这个

456
00:19:47,080 --> 00:19:49,510
就说能去拿着一个参考时钟

457
00:19:49,520 --> 00:19:50,010
拿

458
00:19:50,060 --> 00:19:52,470
就是说我以O点为基准的时候

459
00:19:52,480 --> 00:19:54,950
我为什么bd要能去拿到这个

460
00:19:54,960 --> 00:19:55,900
参考时钟

461
00:19:56,430 --> 00:19:58,410
为什么能这么去做

462
00:20:01,380 --> 00:20:02,490
大家理解了没有

463
00:20:02,500 --> 00:20:03,170
这一个

464
00:20:11,420 --> 00:20:12,070
噢不好意思

465
00:20:12,080 --> 00:20:13,790
老师的电脑有点卡住了

466
00:20:19,310 --> 00:20:21,370
那我们继续往下面讲些吗

467
00:20:21,660 --> 00:20:23,260
我们再演示一下

468
00:20:23,300 --> 00:20:25,210
如果大家不是大家不是很理解的

469
00:20:25,220 --> 00:20:25,630
话

470
00:20:25,800 --> 00:20:27,670
我们用代码演示一下

471
00:20:32,770 --> 00:20:34,180
先把这画板退掉

472
00:20:34,190 --> 00:20:40,460
吧我们先演示一下这个时间

473
00:20:50,770 --> 00:20:52,400
我先执行一下程序

474
00:20:52,410 --> 00:20:53,680
看一下这个时间

475
00:21:10,630 --> 00:21:11,600
他稍等一下

476
00:21:11,610 --> 00:21:12,940
电脑有点卡

477
00:21:28,390 --> 00:21:29,480
哦我知道

478
00:21:29,490 --> 00:21:30,120
不好意思

479
00:21:30,130 --> 00:21:31,400
我这里弄一下先

480
00:22:00,930 --> 00:22:02,890
大家可以看一下这个时间

481
00:22:02,900 --> 00:22:06,480
就是说我在演示用代码演示一下

482
00:22:06,490 --> 00:22:08,440
这个时钟是怎么去跑的

483
00:22:09,810 --> 00:22:14,100
比如我这里设置了一个2020

484
00:22:14,110 --> 00:22:14,570
毫秒

485
00:22:14,580 --> 00:22:16,180
我这里设了一个20毫秒

486
00:22:18,000 --> 00:22:20,430
我把它射倒O有时钟里面去

487
00:22:21,160 --> 00:22:23,230
我这个时候以O点为基准

488
00:22:23,440 --> 00:22:25,080
这时候设到20毫秒

489
00:22:25,640 --> 00:22:28,070
然后我马上去读这个时钟

490
00:22:29,350 --> 00:22:30,360
大家可以看一下

491
00:22:30,370 --> 00:22:31,220
我马上去读

492
00:22:31,230 --> 00:22:32,020
这个始终

493
00:22:32,680 --> 00:22:35,250
就说我这里是送了一个20毫秒

494
00:22:35,260 --> 00:22:36,850
我马上去读一个20

495
00:22:37,060 --> 00:22:38,340
是说读这个时钟

496
00:22:38,350 --> 00:22:39,090
我们再看一下

497
00:22:39,100 --> 00:22:39,490
它是

498
00:22:40,040 --> 00:22:43,240
打印出来就是一个20毫秒

499
00:22:43,550 --> 00:22:44,800
然后我们再看一下

500
00:22:44,840 --> 00:22:48,190
它这里是过了40毫秒再去读

501
00:22:48,200 --> 00:22:49,150
这个时钟

502
00:22:49,390 --> 00:22:52,060
我们再看再看这里这里打印出来

503
00:22:52,070 --> 00:22:53,780
就是60多毫秒了

504
00:22:54,100 --> 00:22:56,590
这个是因为ABU sleep

505
00:22:56,600 --> 00:22:58,010
这里是有一点误差

506
00:22:58,020 --> 00:23:00,980
大家不用不用太纠结这一个

507
00:23:01,270 --> 00:23:03,810
我们这里主要演示的是说

508
00:23:04,060 --> 00:23:05,950
他O点射进去后

509
00:23:06,000 --> 00:23:08,390
它这个主时间轴是有在走了

510
00:23:11,250 --> 00:23:12,900
我们可以再看一下这里

511
00:23:12,940 --> 00:23:14,640
就说我audio下

512
00:23:14,650 --> 00:23:17,930
我要再加上一个23毫秒这样子

513
00:23:18,250 --> 00:23:19,940
我马上要射进去

514
00:23:21,490 --> 00:23:22,350
射进去

515
00:23:22,400 --> 00:23:25,150
这本来它这里是60

516
00:23:25,190 --> 00:23:26,220
这个该出来了

517
00:23:26,230 --> 00:23:27,770
始终是60多毫秒了

518
00:23:27,890 --> 00:23:30,160
这时候我又设了一个40多毫秒

519
00:23:30,170 --> 00:23:30,960
的进去

520
00:23:31,160 --> 00:23:34,070
我在边上出来他还是40多毫秒

521
00:23:34,680 --> 00:23:37,090
就表明我这一个就说以我

522
00:23:37,100 --> 00:23:38,010
audio为主

523
00:23:38,050 --> 00:23:41,430
那我就有权利去设置这个时钟

524
00:23:43,170 --> 00:23:44,200
我们再看这里

525
00:23:44,210 --> 00:23:46,120
就是说我隔个20毫秒

526
00:23:46,290 --> 00:23:47,950
我再去读这个时钟

527
00:23:48,110 --> 00:23:50,680
再隔20毫秒去读这一个时钟

528
00:23:50,850 --> 00:23:53,920
其实他就当然应该能看得到

529
00:23:53,930 --> 00:23:56,460
就说他基本上是以20毫秒这

530
00:23:56,470 --> 00:23:57,540
样子增加了

531
00:23:57,690 --> 00:23:58,800
这里不太准

532
00:23:58,810 --> 00:24:01,620
是因为这个用sleep他这

533
00:24:01,630 --> 00:24:02,600
精度不够

534
00:24:02,610 --> 00:24:04,600
唉我不知道大家明白了没有

535
00:24:04,610 --> 00:24:08,450
就是说这个时间这个时间轴它是

536
00:24:08,460 --> 00:24:09,370
怎么走的

537
00:24:12,510 --> 00:24:15,540
有没有朋友给点反馈啊明白这个

538
00:24:15,550 --> 00:24:16,940
时间轴是怎么跑的

539
00:24:16,950 --> 00:24:17,260
没

540
00:24:24,550 --> 00:24:26,080
那老师先继续讲

541
00:24:26,090 --> 00:24:31,960
吧因为有些朋友听得不明白

542
00:24:31,970 --> 00:24:36,040
或者因为往期那课程没有听呢也

543
00:24:36,050 --> 00:24:36,660
可以

544
00:24:36,800 --> 00:24:37,690
提问一下

545
00:24:37,700 --> 00:24:40,240
就是说也可以给大家老师讲一下

546
00:24:40,900 --> 00:24:42,830
免得单位老师一直在讲

547
00:24:42,840 --> 00:24:45,670
以后大家最后都没听明白一点

548
00:24:45,720 --> 00:24:47,640
或者就没学到知识

549
00:24:47,920 --> 00:24:49,480
那这个就不好了

550
00:24:49,480 --> 00:24:54,340
我们继续讲课

551
00:24:54,350 --> 00:25:00,150
先吧大家可以后面拿这个视频

552
00:25:00,160 --> 00:25:02,190
好好理解一下这个时间轴这个

553
00:25:02,200 --> 00:25:02,640
问题

554
00:25:02,640 --> 00:25:05,220
好

555
00:25:05,260 --> 00:25:09,130
今天讲说我们晚上会讲一下声卡

556
00:25:09,140 --> 00:25:11,250
一个基本的一个工作流程

557
00:25:11,250 --> 00:25:13,200
我来看一下

558
00:25:13,210 --> 00:25:16,360
就说我要设置一个双卡输出东西

559
00:25:16,370 --> 00:25:19,270
其实是要设置它采样率

560
00:25:19,310 --> 00:25:21,110
设置它这个采样深度

561
00:25:21,270 --> 00:25:23,990
以及它这种采用合适的

562
00:25:24,230 --> 00:25:27,680
还有这个送到就是声道数量是

563
00:25:27,690 --> 00:25:28,160
怎么样

564
00:25:28,170 --> 00:25:31,300
比如养生道或者三升到这种

565
00:25:32,490 --> 00:25:34,320
我这里给了一个范例

566
00:25:34,330 --> 00:25:35,880
比如说长401

567
00:25:35,950 --> 00:25:38,040
这采用深度射程16比特

568
00:25:39,260 --> 00:25:41,630
这里然后剩下一个两通道

569
00:25:41,930 --> 00:25:44,610
然后我们也要设置一个缓冲

570
00:25:44,780 --> 00:25:46,480
需要一个数据长度

571
00:25:46,670 --> 00:25:48,730
比如设一个8192这样子

572
00:25:49,010 --> 00:25:52,260
但是这个具体是多长是根据你的

573
00:25:52,270 --> 00:25:53,860
硬件来决定

574
00:25:53,870 --> 00:25:56,040
或者你应用程序来决定的

575
00:25:56,090 --> 00:25:58,860
是由就说这个是可控了

576
00:25:58,870 --> 00:26:00,260
可以自己去设定的

577
00:26:01,650 --> 00:26:05,040
然后也会设置一个数

578
00:26:05,150 --> 00:26:06,990
就说中断请求

579
00:26:07,000 --> 00:26:07,960
意思是说

580
00:26:08,010 --> 00:26:11,440
如果我这个里面硬件里面缓冲

581
00:26:11,450 --> 00:26:11,880
里面

582
00:26:11,890 --> 00:26:14,540
它这个数据程度剩多少的时候

583
00:26:14,550 --> 00:26:16,700
会产生一个中断项

584
00:26:17,090 --> 00:26:20,540
就说申请请求要把这个数据传输

585
00:26:20,550 --> 00:26:21,140
过来

586
00:26:21,910 --> 00:26:24,300
比如这里设一个8192这种

587
00:26:24,310 --> 00:26:24,860
概念

588
00:26:26,260 --> 00:26:29,940
就说把这些参数基本的参数配置

589
00:26:29,950 --> 00:26:30,600
好后

590
00:26:30,750 --> 00:26:33,720
我们才会启动这个双卡播放声音

591
00:26:33,730 --> 00:26:33,980
的

592
00:26:34,130 --> 00:26:35,560
大家要明白一下

593
00:26:37,500 --> 00:26:40,510
然后我们在这里讲到一个sd

594
00:26:40,520 --> 00:26:41,050
 I浪

595
00:26:41,060 --> 00:26:44,350
ODO这个为什么要讲这个函数

596
00:26:44,360 --> 00:26:47,730
呢是因为我们学FF的时候

597
00:26:47,820 --> 00:26:49,470
它有一个回调函数

598
00:26:50,040 --> 00:26:51,410
就是说在open

599
00:26:51,420 --> 00:26:52,190
audio的时候

600
00:26:52,200 --> 00:26:56,440
是通过一个回调函数来获取这个

601
00:26:56,450 --> 00:26:57,540
音频数据的

602
00:26:58,650 --> 00:27:01,380
这里我可以给大家稍微看一下

603
00:27:01,390 --> 00:27:03,540
这个SDR乱audio他是

604
00:27:03,550 --> 00:27:08,210
怎么去拿这个数据产生或者说

605
00:27:08,220 --> 00:27:10,290
怎么产生这个毁掉

606
00:27:17,820 --> 00:27:19,810
大家可以稍微看一下就好

607
00:27:19,820 --> 00:27:23,420
就说知道它是产生回调去要数据

608
00:27:23,430 --> 00:27:23,720
的

609
00:27:24,080 --> 00:27:26,740
大家可以注意一下的是

610
00:27:27,200 --> 00:27:29,750
如果是处于静音状态的时候

611
00:27:30,470 --> 00:27:32,680
就说这个audio随poss

612
00:27:32,690 --> 00:27:33,440
状态的时候

613
00:27:33,450 --> 00:27:37,060
其实它就是把数据设为0I这里

614
00:27:37,070 --> 00:27:39,000
就是设为一个经营的一个数据

615
00:27:39,190 --> 00:27:42,750
并不会去就说不会调用这个回调

616
00:27:42,760 --> 00:27:43,290
函数

617
00:27:43,810 --> 00:27:46,240
这里这个和白可是我们应用程序

618
00:27:46,250 --> 00:27:47,540
设计进去的

619
00:27:48,340 --> 00:27:50,930
倒下我也会给大家讲一下是怎么

620
00:27:50,940 --> 00:27:51,930
设置进去的

621
00:27:56,220 --> 00:27:58,800
具体这里就不做多讲了

622
00:28:04,410 --> 00:28:04,860
好

623
00:28:04,870 --> 00:28:06,130
我们再看一下

624
00:28:06,420 --> 00:28:09,810
音频设置时钟时需要考虑哪一些

625
00:28:09,820 --> 00:28:10,330
问题

626
00:28:11,290 --> 00:28:14,890
这时候我们特别要考虑的是这个

627
00:28:14,900 --> 00:28:16,660
硬件缓冲区

628
00:28:16,760 --> 00:28:19,080
它还有多少数据可以播放

629
00:28:19,220 --> 00:28:20,860
它能播放多长

630
00:28:21,880 --> 00:28:25,230
因为我们设PPS的设置

631
00:28:25,240 --> 00:28:26,590
word有设时钟的时候

632
00:28:26,600 --> 00:28:29,670
我们要考虑到它里面还缓存的

633
00:28:29,680 --> 00:28:30,320
数据

634
00:28:30,590 --> 00:28:33,040
它里面就说马上要播放的数据

635
00:28:33,050 --> 00:28:36,620
并不是我现在设置进去的数据

636
00:28:39,920 --> 00:28:42,060
源码发给我们看看

637
00:28:42,490 --> 00:28:46,160
这个可以课后再找我要啊现在也

638
00:28:46,170 --> 00:28:46,680
发

639
00:28:46,720 --> 00:28:48,760
现在不是很方便发给你

640
00:28:51,850 --> 00:28:52,640
我想问一下

641
00:28:52,650 --> 00:28:56,240
你是之前有没有学过音视频

642
00:28:57,310 --> 00:28:58,480
这位同学

643
00:29:08,430 --> 00:29:11,730
跟差飞我也不知道怎么读了

644
00:29:11,770 --> 00:29:13,860
你之前有没有学过音视频

645
00:29:14,580 --> 00:29:16,870
或者是不是学过一些

646
00:29:16,880 --> 00:29:18,610
但是不是很理解

647
00:29:21,330 --> 00:29:25,650
哦那可能今晚听课会有点吃力

648
00:29:26,940 --> 00:29:30,560
因为音视频同步这一块有一些就

649
00:29:30,570 --> 00:29:33,880
说还是有一点点不好理解

650
00:29:38,140 --> 00:29:38,760
好

651
00:29:38,800 --> 00:29:40,660
我们再看这里吧说

652
00:29:41,830 --> 00:29:45,930
比如我这里这个就说要考虑应建

653
00:29:45,940 --> 00:29:47,810
缓冲区的一个数据长度

654
00:29:48,400 --> 00:29:51,670
比如我们代码里面我稍微讲一下

655
00:29:51,680 --> 00:29:52,210
这里

656
00:30:06,500 --> 00:30:07,490
他稍等一下

657
00:30:07,500 --> 00:30:08,760
我稍微讲一下

658
00:30:17,350 --> 00:30:18,830
比如我们这里

659
00:30:19,460 --> 00:30:22,880
他为什么最后ps受到时钟里面

660
00:30:22,890 --> 00:30:24,570
的时候是要减上

661
00:30:25,120 --> 00:30:27,590
就是说要减上一个时间

662
00:30:28,000 --> 00:30:32,350
就是因为它在内部还缓存了一段

663
00:30:32,360 --> 00:30:33,100
数据

664
00:30:33,160 --> 00:30:36,590
就说这里因为是它内部还缓存了

665
00:30:36,600 --> 00:30:37,940
这么长一段数据

666
00:30:39,180 --> 00:30:41,510
所以它要减去这一个时间

667
00:30:42,950 --> 00:30:44,780
但这里为什么要乘二

668
00:30:45,010 --> 00:30:46,300
我等下也会讲一下

669
00:30:46,310 --> 00:30:48,480
等下具体讲代码的时候也会讲

670
00:30:48,490 --> 00:30:48,680
一下

671
00:30:48,690 --> 00:30:50,270
这里为什么要崇尚二

672
00:30:59,230 --> 00:31:02,060
只是说大家在做一些视频同步的

673
00:31:02,070 --> 00:31:02,420
时候

674
00:31:02,430 --> 00:31:05,840
一定要考虑就说缓冲区里面还有

675
00:31:05,850 --> 00:31:07,120
多长的数据

676
00:31:09,650 --> 00:31:13,600
这个不只是说在FF内有考虑

677
00:31:13,850 --> 00:31:16,600
其实在安卓就是说在安卓做

678
00:31:16,610 --> 00:31:17,790
播放器的时候

679
00:31:17,870 --> 00:31:21,330
它一样是要考虑各种缓冲队列

680
00:31:21,340 --> 00:31:21,690
里面

681
00:31:21,700 --> 00:31:24,130
它这个数据还能播多久的

682
00:31:24,170 --> 00:31:26,190
一样是需要考虑这个问题的

683
00:31:30,220 --> 00:31:30,770
好

684
00:31:30,810 --> 00:31:32,350
我们再继续讲一下

685
00:31:32,360 --> 00:31:34,990
就是说刚才我们提了一些问题

686
00:31:35,000 --> 00:31:36,290
比如这个音频

687
00:31:36,530 --> 00:31:38,900
怎么加快这个播放速度

688
00:31:39,080 --> 00:31:41,410
怎么放慢这个播放速度

689
00:31:42,120 --> 00:31:45,200
其实它是通过重采样来改变的

690
00:31:45,260 --> 00:31:48,970
就是说通过重采样改变这个采样

691
00:31:48,980 --> 00:31:49,770
频率

692
00:31:49,810 --> 00:31:52,130
达到这个加快播放速度

693
00:31:52,140 --> 00:31:54,060
或者放慢播放速度

694
00:31:55,040 --> 00:31:57,670
当然这个重采样要在哪里做

695
00:31:57,680 --> 00:31:59,700
呢等下我也会给大家讲一下

696
00:32:00,000 --> 00:32:03,350
我们先现在先讲一下重采样主要

697
00:32:03,360 --> 00:32:06,690
是会改变哪一些参数

698
00:32:06,740 --> 00:32:08,450
涉及到哪一些参数

699
00:32:09,110 --> 00:32:11,160
比如这个采样频率

700
00:32:11,570 --> 00:32:15,350
比如其实就说改变采样频率

701
00:32:15,360 --> 00:32:17,410
呢什么时候需要改变这个采样

702
00:32:17,420 --> 00:32:17,990
频率

703
00:32:18,500 --> 00:32:20,940
就比如我有两个播放器

704
00:32:21,600 --> 00:32:24,730
一个播放器是财务就说解出来的

705
00:32:24,740 --> 00:32:26,770
数据是48K赫兹

706
00:32:27,430 --> 00:32:29,980
一个另一个播放器解出来的数据

707
00:32:29,990 --> 00:32:31,520
是441

708
00:32:31,530 --> 00:32:34,110
K获知这个时候

709
00:32:34,320 --> 00:32:37,030
我如果两个播放器都是要用

710
00:32:37,040 --> 00:32:38,600
同一个硬件来播放

711
00:32:38,720 --> 00:32:39,570
那怎么办

712
00:32:39,700 --> 00:32:41,370
因为我硬件只有一个

713
00:32:41,380 --> 00:32:43,450
只有一种采样率

714
00:32:43,580 --> 00:32:47,310
那这个时候就得有一个播放器把

715
00:32:47,320 --> 00:32:51,230
那个把它这个频率改变

716
00:32:51,460 --> 00:32:54,590
比如我们硬件如果是四四1K

717
00:32:54,600 --> 00:32:55,500
赫兹的话

718
00:32:55,560 --> 00:32:58,770
那两个播放器都是要统一成44

719
00:32:58,780 --> 00:32:59,880
1K赫兹

720
00:33:00,260 --> 00:33:01,390
它是这个意思

721
00:33:01,400 --> 00:33:04,020
就是说从采样呢很多时候

722
00:33:04,030 --> 00:33:08,920
就是因为我们有不同啦就播放

723
00:33:08,960 --> 00:33:11,550
就说不同的声音叠加在一起

724
00:33:11,560 --> 00:33:13,580
所以要做这个采样

725
00:33:13,590 --> 00:33:16,240
就说把从小要把这一频率统一

726
00:33:16,330 --> 00:33:19,490
以及把这一个音频格式也要统一

727
00:33:19,530 --> 00:33:22,060
比如这里讲道音频格式以及它

728
00:33:22,070 --> 00:33:22,980
量化深度

729
00:33:23,360 --> 00:33:26,190
比如这里的一个S16跟这种S

730
00:33:26,200 --> 00:33:29,410
3LP这种排列这种三炮

731
00:33:29,660 --> 00:33:32,150
就说采用深度跟它这个排列格式

732
00:33:32,160 --> 00:33:33,270
都是不一样的

733
00:33:33,440 --> 00:33:35,110
也要做一个转换

734
00:33:36,170 --> 00:33:38,720
还有这一个升到了一个声道数的

735
00:33:38,730 --> 00:33:39,480
一个转换

736
00:33:39,730 --> 00:33:42,360
比如有些数据你解出来是武松到

737
00:33:42,370 --> 00:33:42,940
数据

738
00:33:43,200 --> 00:33:46,010
有些声音就说有些音乐你解出来

739
00:33:46,020 --> 00:33:47,060
是两声道

740
00:33:47,280 --> 00:33:50,030
但是你你硬件只能支持两送到

741
00:33:50,040 --> 00:33:51,970
那你就得统一成两声道

742
00:33:51,980 --> 00:33:53,070
这样子摸出来

743
00:33:54,790 --> 00:33:56,560
不知道大家明白了没有

744
00:33:56,570 --> 00:34:00,020
就是说从采样我主要是要改变哪

745
00:34:00,030 --> 00:34:00,990
一些东西

746
00:34:01,030 --> 00:34:04,170
以及它这个重采样能做什么用

747
00:34:06,290 --> 00:34:08,600
一个就是说统一格式

748
00:34:08,610 --> 00:34:12,650
这个统统一这个硬件输出格式

749
00:34:12,750 --> 00:34:16,280
另一个其实就是用来做这个变速

750
00:34:16,290 --> 00:34:17,070
播放

751
00:34:18,990 --> 00:34:21,540
我再给大家大家讲一下这个硬件

752
00:34:21,550 --> 00:34:24,550
的一个就说音频的一个变速播放

753
00:34:25,050 --> 00:34:27,180
大家应该要理解的是

754
00:34:27,190 --> 00:34:29,620
就是说做变速播放的时候

755
00:34:29,880 --> 00:34:33,190
并不是这个声卡改变了它的播放

756
00:34:33,200 --> 00:34:33,790
速度

757
00:34:34,830 --> 00:34:37,080
因为为什么不是声卡去做改变

758
00:34:37,090 --> 00:34:40,980
呢是因为你这个不同的播放器来

759
00:34:40,990 --> 00:34:43,220
的生活声音来源是不一样了

760
00:34:43,330 --> 00:34:46,330
如果你改变你硬件的一个播放

761
00:34:46,340 --> 00:34:46,690
速度

762
00:34:46,700 --> 00:34:48,620
会影响到其他

763
00:34:48,660 --> 00:34:51,120
就是说影响到不同的一个播放器

764
00:34:51,640 --> 00:34:55,150
但是如果我只是改变我自己

765
00:34:55,160 --> 00:34:58,590
播放器的一个就是说那个采用率

766
00:34:58,630 --> 00:35:02,320
那这个时候我可能产生一个变调

767
00:35:02,400 --> 00:35:05,420
但不影响到其他的播放器

768
00:35:06,880 --> 00:35:08,950
当然这个讲的有点要了

769
00:35:10,480 --> 00:35:12,610
那我就画个图

770
00:35:12,620 --> 00:35:16,730
吧我给我画一个图

771
00:35:19,880 --> 00:35:21,490
这里是播放器一

772
00:35:31,360 --> 00:35:32,820
然后播放7号

773
00:35:43,630 --> 00:35:45,760
就甲油它播放期

774
00:35:46,260 --> 00:35:48,170
解解码出来的数据

775
00:35:59,940 --> 00:36:01,970
我打个比方容易理解一点了

776
00:36:01,980 --> 00:36:03,830
比如96K赫兹

777
00:36:18,290 --> 00:36:20,680
这里是48K货值

778
00:36:20,690 --> 00:36:26,150
吧那我们再看一下硬件硬件指指

779
00:36:26,160 --> 00:36:27,190
是哪一种

780
00:36:52,960 --> 00:36:54,900
那我们这里就说硬件

781
00:36:54,910 --> 00:36:58,760
他目前设置的是四四1K赫兹

782
00:36:58,770 --> 00:36:59,560
输出

783
00:36:59,840 --> 00:37:01,500
那这个时候怎么办

784
00:37:02,280 --> 00:37:04,650
这里就必须做一个类

785
00:37:04,660 --> 00:37:05,190
sample

786
00:37:05,200 --> 00:37:06,670
就说做一个重采样

787
00:37:28,160 --> 00:37:29,230
大家明白了没有

788
00:37:29,240 --> 00:37:32,160
就是说为什么要做一个重采样的

789
00:37:32,170 --> 00:37:33,050
一个设置

790
00:37:34,090 --> 00:37:37,200
当然这里有可能它那个音频就说

791
00:37:37,210 --> 00:37:38,900
音频帧的格式也不太一样

792
00:37:38,910 --> 00:37:41,440
比如可能它这里是16比特

793
00:37:41,740 --> 00:37:43,540
这里就是24比特

794
00:37:43,720 --> 00:37:45,790
但是硬件只能是16比特

795
00:37:45,800 --> 00:37:47,810
那这里也是要做一个统一的一个

796
00:37:47,820 --> 00:37:48,420
转换的

797
00:38:10,640 --> 00:38:11,210
好

798
00:38:11,220 --> 00:38:14,930
我们再看一下这个播放速度的

799
00:38:14,940 --> 00:38:15,690
一个问题

800
00:38:20,020 --> 00:38:22,390
刚才讲了这个播放速度的问题

801
00:38:29,170 --> 00:38:31,320
我们也画一个图来理解一下

802
00:38:31,330 --> 00:38:49,610
吧叫硬件输出

803
00:38:58,090 --> 00:39:00,840
我这里这里呢我就想48K或

804
00:39:00,850 --> 00:39:03,710
知道是为了方便去计算

805
00:39:16,930 --> 00:39:23,050
它本来这个不大家这里我们就以

806
00:39:23,060 --> 00:39:24,850
一个播放器来讲解就可以了

807
00:39:45,920 --> 00:39:48,830
就说本来他的声音也是48K货

808
00:39:48,840 --> 00:39:49,150
值

809
00:40:01,870 --> 00:40:05,950
但是这个时候我们要做要做一个

810
00:40:05,960 --> 00:40:07,010
速度的控制

811
00:40:07,020 --> 00:40:07,920
那怎么办

812
00:40:07,970 --> 00:40:09,160
我们可以看一下

813
00:40:24,280 --> 00:40:26,420
哦这个电脑有点卡了

814
00:40:27,190 --> 00:40:30,020
我们先看一下这个加快播放速度

815
00:40:30,290 --> 00:40:35,740
就是说我做一个48K到24K

816
00:40:35,750 --> 00:40:37,900
赫兹的一个重采样

817
00:40:38,130 --> 00:40:41,020
其实这种总比例呢重采样就是

818
00:40:41,060 --> 00:40:42,520
容易弄一点

819
00:40:42,530 --> 00:40:44,120
其实就是抽值就可以了

820
00:40:46,820 --> 00:40:48,430
就抽取就可以了

821
00:40:57,040 --> 00:40:58,820
那这里我们看一下

822
00:41:01,810 --> 00:41:05,520
它本身就说以AC为利他是一帧

823
00:41:05,530 --> 00:41:06,210
数据

824
00:41:08,590 --> 00:41:10,540
它是1024个采样点

825
00:41:19,010 --> 00:41:21,940
这个时候我们如果做将采样

826
00:41:21,950 --> 00:41:26,400
呢就说我48K赫兹换算成24

827
00:41:26,410 --> 00:41:26,980
K赫兹

828
00:41:26,990 --> 00:41:30,070
那这个时候就是把这个采样点

829
00:41:30,110 --> 00:41:31,350
减半就可以了

830
00:41:33,770 --> 00:41:36,780
这种等比例还是容易理解一点

831
00:42:13,060 --> 00:42:16,060
知道这个时候我降低这个采

832
00:42:16,070 --> 00:42:18,040
然后那我一帧数据本来是

833
00:42:18,050 --> 00:42:19,610
1024个点的

834
00:42:20,160 --> 00:42:24,080
但这个时候它变成了512个点

835
00:42:24,530 --> 00:42:27,690
但是我硬件硬件这边是不变的

836
00:42:28,140 --> 00:42:32,850
就是说本来这1024个点是一

837
00:42:32,860 --> 00:42:34,050
帧都是能播放

838
00:42:34,060 --> 00:42:35,720
我看我们可以算一下

839
00:42:52,570 --> 00:42:55,400
就以213毫秒这样子

840
00:42:55,410 --> 00:43:03,110
吧但是我这里变成了512个点

841
00:43:03,120 --> 00:43:03,540
后

842
00:43:28,920 --> 00:43:30,400
106

843
00:43:36,700 --> 00:43:41,160
其实就是说我本来可以播放21

844
00:43:41,170 --> 00:43:42,400
3毫秒的数据

845
00:43:42,900 --> 00:43:44,170
但是我做了将采

846
00:43:44,180 --> 00:43:46,830
然后我只能播放106毫秒

847
00:43:47,380 --> 00:43:50,130
而且那这个时候我是不是要加快

848
00:43:50,140 --> 00:43:53,320
这个读取了一个速速度

849
00:43:54,190 --> 00:43:56,650
就说本来他一帧数据

850
00:43:56,690 --> 00:43:58,690
这时候我要两帧数据

851
00:43:58,910 --> 00:44:01,840
就说我变成了同一段时间我要播

852
00:44:01,850 --> 00:44:02,780
两层数据

853
00:44:02,930 --> 00:44:05,600
所以这个它播放速度就是增加了

854
00:44:05,610 --> 00:44:06,550
就变快了

855
00:44:06,770 --> 00:44:08,740
我不知道大家明白这一个了没有

856
00:44:13,850 --> 00:44:14,720
大家理解了

857
00:44:14,730 --> 00:44:18,500
这个将采样就会加快播放速度

858
00:44:18,650 --> 00:44:19,660
大家理解了没有

859
00:44:27,200 --> 00:44:28,390
那我们再继续讲

860
00:44:28,400 --> 00:44:34,090
吧其实这个这个放慢播放速度

861
00:44:34,210 --> 00:44:36,320
原理也也是类似

862
00:44:36,330 --> 00:44:40,410
啊就是说我D采样向高产羊进行

863
00:44:40,420 --> 00:44:41,590
重采样的时候

864
00:44:41,630 --> 00:44:43,250
本来1024个点

865
00:44:43,260 --> 00:44:45,450
那这个时候就变成了一个

866
00:44:45,460 --> 00:44:46,510
2048

867
00:44:47,270 --> 00:44:50,180
相当于这里头就是说我这个时间

868
00:44:50,220 --> 00:44:53,730
本来是可以只能播放213毫秒

869
00:44:53,740 --> 00:44:53,950
了

870
00:44:53,990 --> 00:44:55,920
但是我变成了2048

871
00:44:56,040 --> 00:44:58,780
那我这一帧数据我就能播放四

872
00:44:59,670 --> 00:45:01,190
126毫秒了

873
00:45:01,290 --> 00:45:02,910
所以它就变慢了

874
00:45:02,920 --> 00:45:04,470
就播放速度是变慢了

875
00:45:08,760 --> 00:45:10,200
是这个意思

876
00:45:13,870 --> 00:45:14,220
好

877
00:45:14,230 --> 00:45:15,500
我们再看一下

878
00:45:16,640 --> 00:45:20,430
就说FF类里面它是一种就是说

879
00:45:20,440 --> 00:45:22,690
就说audio跟video

880
00:45:22,940 --> 00:45:25,390
跟这个外部始终它都是有自己的

881
00:45:25,400 --> 00:45:26,370
一个时间的

882
00:45:26,700 --> 00:45:29,620
他们这种时间是相互不影响的

883
00:45:30,570 --> 00:45:33,080
因为它各自都有自己的一个相对

884
00:45:33,090 --> 00:45:33,660
时间

885
00:45:35,650 --> 00:45:38,180
大家可以等下可以看一下代码

886
00:45:39,830 --> 00:45:41,580
我们刚才讲了就是说这个

887
00:45:41,590 --> 00:45:43,480
site高考的一个实质

888
00:45:43,840 --> 00:45:47,480
其实就是一个pps跟当前时间

889
00:45:47,490 --> 00:45:49,380
的一个时间差异

890
00:45:53,660 --> 00:45:56,270
这个该Q口也是类似的

891
00:45:56,280 --> 00:45:57,880
就是我们可以看这张图

892
00:46:00,470 --> 00:46:02,960
大家自己回去看这个site

893
00:46:02,970 --> 00:46:05,240
Q口跟这个get口的时候

894
00:46:05,510 --> 00:46:07,640
可对着这张图看一下

895
00:46:07,680 --> 00:46:08,200
对对

896
00:46:08,210 --> 00:46:10,010
这我给大家发了这张图

897
00:46:11,930 --> 00:46:13,640
然后我们刚才讲的就是说

898
00:46:13,650 --> 00:46:14,100
audio

899
00:46:14,110 --> 00:46:18,460
它是通过回调的方式去读选音频

900
00:46:18,470 --> 00:46:19,300
数据了

901
00:46:19,520 --> 00:46:22,350
但这个回调间隔它是怎么去解决

902
00:46:22,360 --> 00:46:23,250
决定的呢

903
00:46:23,790 --> 00:46:27,430
其实就是因为这里决决定了

904
00:46:30,890 --> 00:46:34,820
就是说由这个这个阈值

905
00:46:34,830 --> 00:46:37,110
就说我这个数据阈值

906
00:46:37,230 --> 00:46:40,060
就说我比如还剩8月9号的时候

907
00:46:40,070 --> 00:46:43,640
那我就应该产生一个数据的一个

908
00:46:43,650 --> 00:46:44,400
请求

909
00:46:44,760 --> 00:46:47,770
那这就会调用到这一个回调函数

910
00:46:51,000 --> 00:46:53,880
这里头要考了一个心里有的一个

911
00:46:54,030 --> 00:46:54,800
改变

912
00:46:54,810 --> 00:46:56,790
我们在后面的课程在讲

913
00:46:57,410 --> 00:46:59,200
这里讲有一点抽象

914
00:47:04,020 --> 00:47:04,410
好

915
00:47:04,420 --> 00:47:05,770
我们再看一下

916
00:47:07,110 --> 00:47:09,560
在FFK做同步的时候

917
00:47:09,570 --> 00:47:11,810
应该重点得那个哪一些函数

918
00:47:12,320 --> 00:47:16,830
比如这里这这个OTO的一个

919
00:47:16,840 --> 00:47:17,450
回调函数

920
00:47:17,460 --> 00:47:20,330
就是这就说oo点拿数据的时候

921
00:47:20,340 --> 00:47:23,350
是这一个产生一个回调来做了

922
00:47:29,190 --> 00:47:32,220
在一个新号奥迪有着一个呢其实

923
00:47:32,230 --> 00:47:35,040
它就是如果不使用audio为

924
00:47:35,050 --> 00:47:37,310
基准的同步方式的时候

925
00:47:37,320 --> 00:47:40,230
audio可能要做一些放快

926
00:47:40,310 --> 00:47:41,380
就要加快速度

927
00:47:41,390 --> 00:47:44,950
或者将慢就要降低这个播放速度

928
00:47:44,960 --> 00:47:45,600
的时候

929
00:47:45,720 --> 00:47:49,520
它要就要吊着一个函数去做一个

930
00:47:49,530 --> 00:47:50,040
林森捅

931
00:47:50,050 --> 00:47:53,150
就说做一个李森普的一个数量

932
00:47:53,160 --> 00:47:53,740
计算

933
00:47:55,360 --> 00:47:56,930
还有这个video left

934
00:47:56,940 --> 00:47:57,290
us

935
00:47:57,380 --> 00:48:02,030
其实他是调这个函数去输出视频

936
00:48:05,070 --> 00:48:07,360
这样computer它KD类

937
00:48:07,370 --> 00:48:10,320
呢是计算当前视频始终与主持中

938
00:48:10,330 --> 00:48:11,580
的一个时间差

939
00:48:11,920 --> 00:48:14,190
但是大家要注意一下

940
00:48:14,560 --> 00:48:18,040
其实就是说这里并没有根本性的

941
00:48:18,050 --> 00:48:19,720
决定这个时间

942
00:48:19,720 --> 00:48:22,580
应该就说视频应该什么时候去

943
00:48:22,590 --> 00:48:23,200
播放

944
00:48:23,240 --> 00:48:26,060
等下我会对着代码给大家讲一下

945
00:48:27,680 --> 00:48:30,370
这个OPPO带VD有pps

946
00:48:30,380 --> 00:48:31,970
其实就是设置时钟

947
00:48:35,500 --> 00:48:35,790
好

948
00:48:35,800 --> 00:48:37,560
这个audio抵扣prime

949
00:48:37,640 --> 00:48:40,870
其实就是读取音频真的一个数据

950
00:48:43,400 --> 00:48:46,660
我们这里累fly C糯缶威特

951
00:48:46,670 --> 00:48:48,840
you went这里其实就是

952
00:48:49,190 --> 00:48:50,600
要去做

953
00:48:50,600 --> 00:48:52,780
是控制视频的一个刷新

954
00:48:55,430 --> 00:48:58,060
我们先看看大家讲一下

955
00:49:01,660 --> 00:49:04,670
我们先从这个音频来入手

956
00:49:04,670 --> 00:49:07,550
大家稍等一下

957
00:49:07,900 --> 00:49:09,730
当老师先喝点水

958
00:49:19,580 --> 00:49:21,710
那稍微休息五分钟先

959
00:51:35,790 --> 00:51:36,420
好

960
00:51:36,470 --> 00:51:38,040
刚才老师继续讲课

961
00:51:38,080 --> 00:51:42,580
大家知道大家准备好了没有

962
00:51:44,500 --> 00:51:45,500
那我们继续讲课

963
00:51:45,510 --> 00:51:56,990
吧在讲课之前

964
00:51:57,000 --> 00:51:59,330
大家可以就说继续讲课之前

965
00:51:59,430 --> 00:52:01,700
可以继续看一下这一张图

966
00:52:01,790 --> 00:52:05,190
这个再去就说好好的看一下

967
00:52:11,640 --> 00:52:13,430
那我们开始讲一下代码

968
00:52:21,080 --> 00:52:24,780
那我们先主要讲一下这个就是说

969
00:52:24,790 --> 00:52:26,340
audio这边是怎么去说

970
00:52:26,350 --> 00:52:28,340
始终我们我们先讲一下

971
00:52:28,350 --> 00:52:31,750
这个以音频为基准

972
00:52:50,890 --> 00:52:52,070
以音频为基准

973
00:52:52,110 --> 00:52:54,420
要了解哪一些地方

974
00:52:56,990 --> 00:52:59,700
就说音频始终是在哪里设置的

975
00:53:21,460 --> 00:53:25,130
当然了音频始终在怎么设置之前

976
00:53:25,280 --> 00:53:27,190
我们应该先看一下

977
00:53:27,200 --> 00:53:29,720
就是说同步方式是怎么去设置

978
00:53:35,450 --> 00:53:37,940
然后再看一下这个音频始终在

979
00:53:37,950 --> 00:53:38,940
哪里设置

980
00:53:41,240 --> 00:53:45,030
第二个就是视频怎么去跟始终做

981
00:53:45,040 --> 00:53:45,790
参考

982
00:53:58,020 --> 00:53:58,400
好

983
00:53:58,410 --> 00:54:00,990
大家先看一下这几个问题

984
00:54:07,030 --> 00:54:09,760
我们先看一下这一个av信

985
00:54:10,230 --> 00:54:11,980
我们可以稍微搜索一下

986
00:54:14,810 --> 00:54:15,200
好

987
00:54:15,210 --> 00:54:16,480
我们先看一下

988
00:54:16,850 --> 00:54:19,170
ABC可是在哪里去设置

989
00:54:21,660 --> 00:54:23,830
大家可以后面去搜索一下代码

990
00:54:23,840 --> 00:54:25,260
我这里先列一下出来

991
00:54:26,980 --> 00:54:29,290
其实它这里是做初始化的时候有

992
00:54:29,300 --> 00:54:30,140
去设置

993
00:54:30,280 --> 00:54:32,610
我也可以打一个端点看一下

994
00:54:36,530 --> 00:54:38,420
其实这里是一个默认的

995
00:54:50,930 --> 00:54:52,300
大家可以看一下

996
00:54:58,730 --> 00:55:01,270
然后我们再看一下它这个时钟是

997
00:55:01,280 --> 00:55:02,240
怎么去设置

998
00:55:09,470 --> 00:55:12,200
所以我们这个音频时钟设置是在

999
00:55:12,210 --> 00:55:13,770
回调函数里面设置的

1000
00:55:26,610 --> 00:55:28,420
大家可以看一下这一个就是

1001
00:55:28,430 --> 00:55:29,720
audio的一个时钟

1002
00:55:31,270 --> 00:55:33,690
然后我们再看一下他这主时钟

1003
00:55:33,740 --> 00:55:35,340
这个video怎么去读取

1004
00:55:38,010 --> 00:55:39,900
当然我们也可以通过搜索

1005
00:55:39,910 --> 00:55:42,960
video去看一下

1006
00:55:46,010 --> 00:55:46,920
比如这里

1007
00:55:50,790 --> 00:55:52,620
我们看一下他是哪里去盖草

1008
00:55:52,630 --> 00:55:53,410
这个始终

1009
00:55:59,460 --> 00:56:02,070
反正这样子就比较容易去查找

1010
00:56:02,080 --> 00:56:02,680
一下

1011
00:56:04,600 --> 00:56:26,340
盖头的时候是在这个我们可以

1012
00:56:26,350 --> 00:56:27,980
打断点去看一下

1013
00:56:46,850 --> 00:56:47,560
好

1014
00:56:47,600 --> 00:56:49,960
我们先看一下这个断点的执行

1015
00:56:49,970 --> 00:56:50,620
情况

1016
00:57:13,750 --> 00:57:15,020
大家可以看一下

1017
00:57:15,030 --> 00:57:18,120
就是说可以通过这种方式去跟踪

1018
00:57:18,130 --> 00:57:18,600
一下

1019
00:57:22,380 --> 00:57:23,990
可以看到这里是在哪里

1020
00:57:24,000 --> 00:57:27,280
是说它这里是设置了一个同步

1021
00:57:27,430 --> 00:57:30,500
就是电视频同步了一个类型

1022
00:57:38,640 --> 00:57:41,150
我们可以看得到这里其实就是

1023
00:57:41,240 --> 00:57:42,170
audio的

1024
00:57:43,990 --> 00:57:46,160
因为这里RO的must是零

1025
00:57:49,600 --> 00:57:52,220
可以通过这种方式去做一个跟踪

1026
00:57:55,180 --> 00:57:56,660
我们继续执行

1027
00:57:56,740 --> 00:57:58,250
哦先把这个端点打掉

1028
00:57:58,260 --> 00:58:00,410
吧这个是不关系的

1029
00:58:03,220 --> 00:58:07,330
我们可以看得到这里这一个始终

1030
00:58:07,640 --> 00:58:09,630
就说audio要来设置这个

1031
00:58:09,640 --> 00:58:10,090
时钟

1032
00:58:10,100 --> 00:58:22,090
啊就是说当然在讲这个

1033
00:58:22,100 --> 00:58:23,730
audio设置始终之前

1034
00:58:23,740 --> 00:58:25,380
我得给大家讲一下

1035
00:58:25,520 --> 00:58:29,130
就是说不管是不管是以谁为基准

1036
00:58:29,140 --> 00:58:29,990
的时候

1037
00:58:30,140 --> 00:58:34,230
其实音频和视频他都会去设置

1038
00:58:34,270 --> 00:58:35,760
自己的一个时钟

1039
00:58:36,550 --> 00:58:41,320
只是说做参考做同步的时候是该

1040
00:58:41,330 --> 00:58:43,190
渠道是谁都始终而已

1041
00:58:43,550 --> 00:58:45,700
大家要理解一下这个概念

1042
00:58:46,110 --> 00:58:50,560
就是说不管是哪一种同步方式

1043
00:58:50,690 --> 00:58:53,640
音频跟视频都会去设置它自己的

1044
00:58:53,650 --> 00:58:54,520
一个始终的

1045
00:58:56,900 --> 00:58:57,230
好

1046
00:58:57,240 --> 00:58:59,650
我们可以看看一下这个ps是

1047
00:58:59,660 --> 00:59:00,240
多少

1048
00:59:00,520 --> 00:59:02,180
说第一次射进来

1049
00:59:07,750 --> 00:59:09,620
其实大家可以看得到

1050
00:59:09,630 --> 00:59:12,230
就说这里是是付了

1051
00:59:14,090 --> 00:59:15,490
这里是富了

1052
00:59:16,530 --> 00:59:17,740
为什么会这样

1053
00:59:17,750 --> 00:59:19,830
呢大家有没有想过

1054
00:59:20,310 --> 00:59:22,000
其实就是刚才我说了

1055
00:59:22,010 --> 00:59:26,520
因为它硬件里面还有这么长的一

1056
00:59:26,530 --> 00:59:27,430
段数据

1057
00:59:27,570 --> 00:59:30,280
就是说它因为它还有一段数据

1058
00:59:30,320 --> 00:59:31,590
没有输出

1059
00:59:31,850 --> 00:59:36,400
所以它设这个qq的时候

1060
00:59:36,410 --> 00:59:38,520
他要考虑这个一段数据

1061
00:59:38,560 --> 00:59:39,660
要考虑到

1062
00:59:41,580 --> 00:59:43,320
考虑到这段数据

1063
00:59:45,480 --> 00:59:48,290
我们可以稍微记看一下这段数据

1064
00:59:48,300 --> 00:59:49,460
是多少

1065
00:59:52,900 --> 00:59:54,970
其实他这里是8192的

1066
00:59:57,790 --> 01:00:00,400
我们从这里看一下这个信息

1067
01:00:01,930 --> 01:00:04,200
这是44点

1068
01:00:04,860 --> 01:00:06,030
1K赫兹的

1069
01:00:06,100 --> 01:00:08,240
我们可以算一下这个时间长度

1070
01:00:08,280 --> 01:00:15,680
就是说这819噢要除为这个

1071
01:00:15,690 --> 01:00:16,760
双双到

1072
01:00:17,510 --> 01:00:20,210
然后除以这个16笔套一个卫生

1073
01:00:22,570 --> 01:00:24,040
那就是两志杰

1074
01:00:24,040 --> 01:00:28,060
然后算出来是有2048个三口

1075
01:00:28,070 --> 01:00:29,300
我们再看一下

1076
01:00:29,780 --> 01:00:32,060
他要播放多长时间

1077
01:00:32,060 --> 01:00:38,870
我们可以看得到

1078
01:00:41,130 --> 01:00:45,810
它是有40多是有40多毫秒

1079
01:00:48,240 --> 01:00:50,650
但是为什么这里是一个

1080
01:00:50,650 --> 01:00:54,090
50多

1081
01:00:54,100 --> 01:00:55,100
我们再看一下

1082
01:00:55,140 --> 01:00:56,890
是不是还有哪一个变量

1083
01:00:56,890 --> 01:01:00,840
我们先看一下这个变量

1084
01:01:13,990 --> 01:01:15,160
那我们可以看得到

1085
01:01:15,170 --> 01:01:17,400
其实它是因为这里还有一部分

1086
01:01:17,410 --> 01:01:18,070
数据

1087
01:01:27,670 --> 01:01:30,930
所以他还要减去这一部分的数据

1088
01:01:30,940 --> 01:01:32,650
产生了一个50多

1089
01:01:36,650 --> 01:01:38,660
其实它这个是什么意思呢

1090
01:01:38,700 --> 01:01:42,110
意思是之前还遗留了一部分数据

1091
01:01:48,260 --> 01:01:50,650
大家可以到时候看一下这个代码

1092
01:01:50,690 --> 01:01:52,200
去理解一下

1093
01:01:52,830 --> 01:01:53,600
这个audio

1094
01:01:53,610 --> 01:01:56,240
light up赛一个概念

1095
01:01:58,680 --> 01:02:01,370
反正这里讲解主要是大家要理解

1096
01:02:01,380 --> 01:02:01,920
的是

1097
01:02:01,960 --> 01:02:04,490
就是说我可能缓冲区里面还有一

1098
01:02:04,500 --> 01:02:05,270
段数据

1099
01:02:05,700 --> 01:02:08,290
所以我这一个计算真正的pps

1100
01:02:08,300 --> 01:02:08,690
的时候

1101
01:02:08,700 --> 01:02:12,220
我要减去它还没有播放这段数据

1102
01:02:12,230 --> 01:02:13,540
的一个时间长度

1103
01:02:15,330 --> 01:02:16,720
我们在执行一下

1104
01:02:24,430 --> 01:02:25,580
它都是一样的

1105
01:02:29,800 --> 01:02:31,330
我不知道大家有没有理解

1106
01:02:31,340 --> 01:02:33,650
这个就说这个设置audio的

1107
01:02:33,660 --> 01:02:34,290
一个地方

1108
01:02:34,330 --> 01:02:35,520
甚至audio可口

1109
01:02:38,430 --> 01:02:39,720
那我们再看一下

1110
01:02:39,730 --> 01:02:41,430
V点怎么去读这一个

1111
01:02:46,740 --> 01:02:49,230
BT我去读这个主食中

1112
01:02:49,570 --> 01:02:51,410
就是说它为什么读的是

1113
01:02:51,450 --> 01:02:53,320
audio的一个时间戳呢

1114
01:02:53,660 --> 01:02:55,770
其实我们可以看一下这个函数是

1115
01:02:55,780 --> 01:02:56,610
怎么去实现

1116
01:02:56,620 --> 01:03:01,250
呢就是说他这里会去判断当前的

1117
01:03:01,260 --> 01:03:02,260
一个同步类型

1118
01:03:02,440 --> 01:03:04,100
比如刚才我们设置的是

1119
01:03:04,140 --> 01:03:05,960
audio同must

1120
01:03:06,000 --> 01:03:08,200
那这个时候他跟时钟的时候

1121
01:03:08,400 --> 01:03:10,270
他拿到的是audio的一个

1122
01:03:10,280 --> 01:03:10,920
时间

1123
01:03:11,220 --> 01:03:13,250
所以它就是以O点为

1124
01:03:13,590 --> 01:03:15,650
就说以O点为基准

1125
01:03:16,340 --> 01:03:17,810
这里大家明白了没有

1126
01:03:17,820 --> 01:03:19,910
就是说以O点为基准的时候

1127
01:03:19,980 --> 01:03:21,570
他是什么样一个原理

1128
01:03:22,180 --> 01:03:24,090
我们也可以稍微在这里打一个

1129
01:03:24,100 --> 01:03:24,610
时间

1130
01:03:24,780 --> 01:03:26,370
就要打一个端点看一下

1131
01:03:27,830 --> 01:03:30,160
其实这里打一个锻炼就很明显

1132
01:03:30,170 --> 01:03:32,280
就他进来了就进到audio

1133
01:03:32,290 --> 01:03:32,840
这边

1134
01:03:33,130 --> 01:03:35,280
掂这个audio的一个时钟

1135
01:03:40,960 --> 01:03:42,910
那我们先把这端点退出来

1136
01:03:45,420 --> 01:03:48,230
实际上就是这里去做一个时间的

1137
01:03:48,240 --> 01:03:48,880
一个同步

1138
01:03:48,890 --> 01:03:53,650
就是说去比较比较这个当前

1139
01:03:53,700 --> 01:03:55,330
video跟这个OD啊一个

1140
01:03:55,340 --> 01:03:55,810
差值

1141
01:03:55,820 --> 01:03:58,230
就时时中的一个差值

1142
01:04:00,960 --> 01:04:03,840
计算出这个B类的一个就是说

1143
01:04:03,890 --> 01:04:06,800
计算出我当前video的一个

1144
01:04:06,810 --> 01:04:09,120
始终跟欧帝尔差值是怎么样

1145
01:04:09,130 --> 01:04:10,860
呢也要去判断它

1146
01:04:10,950 --> 01:04:13,730
我还要是不是要等一下再播放

1147
01:04:13,770 --> 01:04:16,270
或者我要把当前这一帧数据呢

1148
01:04:16,310 --> 01:04:18,310
是不是要稍微丢掉

1149
01:04:18,910 --> 01:04:19,520
当然了

1150
01:04:19,530 --> 01:04:22,020
他还要根据外面的一些结果来去

1151
01:04:22,060 --> 01:04:22,980
做判断

1152
01:04:23,660 --> 01:04:25,550
我们可以稍微来看一下这里是

1153
01:04:25,560 --> 01:04:26,410
怎么去做的

1154
01:04:32,120 --> 01:04:34,630
这里是有一个同步的一个阈值

1155
01:04:36,580 --> 01:04:39,470
我们可以看一下它这里设是多大

1156
01:04:46,360 --> 01:04:50,190
它这里说的就是再一个就是一

1157
01:04:50,200 --> 01:04:51,200
整个数据

1158
01:04:58,790 --> 01:05:01,840
就是说大家可能不是很理解

1159
01:05:01,850 --> 01:05:04,640
这里怎么一帧数据是41点多

1160
01:05:04,970 --> 01:05:05,500
毫秒

1161
01:05:05,540 --> 01:05:08,420
其实是因为他现在这个视频是

1162
01:05:08,770 --> 01:05:10,120
239

1163
01:05:10,130 --> 01:05:11,680
真的是一个视频

1164
01:05:12,860 --> 01:05:15,150
大家可以用E去除一下

1165
01:05:15,160 --> 01:05:17,960
这个可以算出它的帧率来

1166
01:05:24,260 --> 01:05:25,710
我们可以稍微去看一下

1167
01:05:25,720 --> 01:05:28,570
就是说如果超过一周的数据

1168
01:05:28,900 --> 01:05:30,410
需要怎么去做

1169
01:05:32,130 --> 01:05:34,880
那这个B类是不是就应该就说

1170
01:05:34,890 --> 01:05:35,780
不得累了

1171
01:05:36,860 --> 01:05:38,540
就说已经落后于真了

1172
01:05:38,640 --> 01:05:40,740
那我就不应该做一个D类

1173
01:05:44,810 --> 01:05:46,180
在里头做视频

1174
01:05:46,190 --> 01:05:47,220
如果超前一点

1175
01:05:47,230 --> 01:05:49,260
那也会稍微计算一下

1176
01:05:49,860 --> 01:05:51,350
大概还要delay多久

1177
01:05:55,810 --> 01:05:57,860
这个可能要自己去看代码

1178
01:05:57,870 --> 01:05:59,580
然后去好好去理解一下

1179
01:05:59,710 --> 01:06:01,680
然后把这些打印都打出来

1180
01:06:02,580 --> 01:06:05,970
比如当老师这里做调试的时候就

1181
01:06:05,980 --> 01:06:07,530
会把这个打印打出来

1182
01:06:10,430 --> 01:06:11,480
我们再看一下

1183
01:06:11,520 --> 01:06:14,140
就说外面的一些操作是怎么样的

1184
01:06:28,630 --> 01:06:29,140
好

1185
01:06:29,180 --> 01:06:30,520
我们再看一下

1186
01:06:30,530 --> 01:06:31,860
这个刷新这一部分

1187
01:06:31,870 --> 01:06:34,200
吧就是说我做时钟同步的时候是

1188
01:06:34,210 --> 01:06:35,010
怎么去做的

1189
01:06:36,330 --> 01:06:37,940
我们从头看一下

1190
01:06:39,330 --> 01:06:41,880
看这个video是怎么去跟欧

1191
01:06:41,890 --> 01:06:42,930
迪尔做同步

1192
01:06:45,420 --> 01:06:46,530
我们先看一下

1193
01:06:46,540 --> 01:06:50,750
就是说我这个刷新线城市在哪里

1194
01:06:50,760 --> 01:06:51,010
的

1195
01:06:51,550 --> 01:06:53,280
我们可以看一下这个调用栈

1196
01:06:56,300 --> 01:06:59,070
其实他就是这个主循环里面做的

1197
01:07:00,300 --> 01:07:02,320
这个E文搂进来

1198
01:07:03,860 --> 01:07:06,370
然后这里再一个类flash

1199
01:07:09,220 --> 01:07:11,610
它进到这里来有一个while

1200
01:07:11,620 --> 01:07:12,300
循环

1201
01:07:13,260 --> 01:07:15,030
给大家讲一下这个while

1202
01:07:15,040 --> 01:07:15,450
循环

1203
01:07:15,460 --> 01:07:17,330
它是怎么样一个原理呢

1204
01:07:17,340 --> 01:07:20,130
就是说我这里会响应一些案件的

1205
01:07:20,140 --> 01:07:21,040
一个事件

1206
01:07:21,340 --> 01:07:23,810
去看一下我有没有一些案件事件

1207
01:07:23,820 --> 01:07:26,570
或者或者其或者其他一些事件

1208
01:07:26,580 --> 01:07:27,050
进来

1209
01:07:27,630 --> 01:07:29,260
如果有事件的话

1210
01:07:29,270 --> 01:07:31,260
它这个循环是退出来

1211
01:07:31,450 --> 01:07:38,060
退出来后回到这里去执行这些

1212
01:07:38,100 --> 01:07:39,720
案件的一个操作

1213
01:07:40,090 --> 01:07:42,300
如果一直都没有案件事件

1214
01:07:42,340 --> 01:07:43,670
也没有什么事件

1215
01:07:44,170 --> 01:07:47,630
那他就是一直在这个while

1216
01:07:47,640 --> 01:07:48,510
循环里面的

1217
01:07:49,220 --> 01:07:50,970
它while循环里面是怎么去

1218
01:07:50,980 --> 01:07:52,570
控制这个播放速度的

1219
01:07:52,580 --> 01:07:58,700
呢他要根据就说主食中跟现在V

1220
01:07:58,710 --> 01:08:00,570
R1个时钟来比较

1221
01:08:01,240 --> 01:08:03,710
然后控制着一个刷新

1222
01:08:04,500 --> 01:08:07,250
就说比如我这个要拨慢一点

1223
01:08:07,300 --> 01:08:09,790
那这个时候我就要退出这个循环

1224
01:08:10,230 --> 01:08:12,770
作为一个实力婆婆就说先休眠

1225
01:08:12,780 --> 01:08:13,310
一下

1226
01:08:14,560 --> 01:08:15,930
大家应该理解一下

1227
01:08:15,940 --> 01:08:21,670
这个这个里面太就是说我要休眠

1228
01:08:21,680 --> 01:08:22,110
多久

1229
01:08:22,120 --> 01:08:25,500
这个变量呢是在哪里设的

1230
01:08:25,890 --> 01:08:29,080
其实是在比较就说video跟

1231
01:08:29,090 --> 01:08:31,820
主食中比较时间错的时候去设置

1232
01:08:31,830 --> 01:08:31,960
了

1233
01:08:31,970 --> 01:08:33,360
我们点击来看

1234
01:08:33,370 --> 01:08:35,700
吧大家可以看得到

1235
01:08:36,500 --> 01:08:40,210
这里就说这里要获取到这一个要

1236
01:08:40,220 --> 01:08:41,490
休眠多长时间

1237
01:08:41,750 --> 01:08:44,100
以后返回来后就做一个休眠

1238
01:08:46,050 --> 01:08:47,520
我们点击来看一下

1239
01:08:48,960 --> 01:08:51,010
前面这里我们就不用理非常

1240
01:08:51,050 --> 01:08:54,270
你们主要是关注这个时钟同步这

1241
01:08:54,280 --> 01:08:54,790
一块

1242
01:08:55,890 --> 01:08:57,130
我们可以看得到

1243
01:08:57,450 --> 01:09:01,850
就是说他进来后他会拿就是说前

1244
01:09:01,860 --> 01:09:05,260
一帧跟当前要播放一帧的数据

1245
01:09:05,940 --> 01:09:07,730
去看一下

1246
01:09:08,380 --> 01:09:10,670
这里我们先一行讲

1247
01:09:10,680 --> 01:09:14,980
吧其实这里是要做系统的时候才

1248
01:09:14,990 --> 01:09:16,220
做一些切换

1249
01:09:16,630 --> 01:09:18,910
我们先不讲姐先

1250
01:09:18,920 --> 01:09:23,450
吧因为之前讲了一个播放器控制

1251
01:09:23,460 --> 01:09:24,190
原理的时候

1252
01:09:24,200 --> 01:09:25,730
室友讲这部分的

1253
01:09:28,550 --> 01:09:29,320
这里暂停

1254
01:09:29,330 --> 01:09:31,260
我们也不讲这个也不用离婚

1255
01:09:31,630 --> 01:09:35,840
都是看这里开始就说他这里计算

1256
01:09:35,850 --> 01:09:36,120
是什么

1257
01:09:36,130 --> 01:09:38,820
呢就是说计算我上一帧数据

1258
01:09:39,150 --> 01:09:41,940
然后到现在这一帧数据我要播放

1259
01:09:41,950 --> 01:09:42,400
多久

1260
01:09:42,410 --> 01:09:45,300
就说这就说上一层坡数据它要

1261
01:09:45,310 --> 01:09:46,700
持续的时间

1262
01:09:47,050 --> 01:09:49,980
然后算出上一帧数据

1263
01:09:49,990 --> 01:09:51,760
它持续了一个时间

1264
01:09:52,170 --> 01:09:54,420
然后根据上一针药持续的一个

1265
01:09:54,430 --> 01:09:55,090
时间

1266
01:09:55,340 --> 01:09:57,920
算出来我当前一帧数据

1267
01:09:58,230 --> 01:09:59,770
我大概要delay多久

1268
01:10:03,180 --> 01:10:06,230
其实大家这里也可以加打印去看

1269
01:10:06,240 --> 01:10:07,890
这个D类指的一个变化

1270
01:10:10,710 --> 01:10:12,920
就是说我算出这个B类之后

1271
01:10:13,340 --> 01:10:14,970
我要去比较

1272
01:10:17,050 --> 01:10:18,100
我再往下走

1273
01:10:18,110 --> 01:10:21,570
吧这也就是拿到一个时间戳

1274
01:10:21,610 --> 01:10:23,170
就是说一个消费时间

1275
01:10:24,530 --> 01:10:25,820
其实讲到这里

1276
01:10:25,830 --> 01:10:28,220
大家就应该注意一下啊这一段

1277
01:10:28,230 --> 01:10:28,740
时间

1278
01:10:28,750 --> 01:10:32,580
呢它为什么要有这么一个时间

1279
01:10:33,070 --> 01:10:34,820
它是系统的一个时间

1280
01:10:34,830 --> 01:10:36,800
是必要显示的一个时间

1281
01:10:36,840 --> 01:10:40,720
就说will真正做刷新的时候

1282
01:10:40,830 --> 01:10:43,620
他还要加上这个系统时间来做

1283
01:10:43,630 --> 01:10:45,280
一个计算

1284
01:10:46,120 --> 01:10:46,970
我们先看一下

1285
01:10:46,980 --> 01:10:48,270
吧一步步往下看

1286
01:10:49,510 --> 01:10:53,130
这里不是比较这里不是很好理解

1287
01:10:55,380 --> 01:10:56,270
我们可以看得到

1288
01:10:56,280 --> 01:10:59,070
它是先拿这个时间跟这个跟

1289
01:10:59,080 --> 01:11:00,930
time这个去比较

1290
01:11:01,550 --> 01:11:01,740
好

1291
01:11:01,750 --> 01:11:03,950
像我们可以打个断点

1292
01:11:03,960 --> 01:11:06,710
看一下刚开始进来这一个时间是

1293
01:11:06,720 --> 01:11:07,260
多少

1294
01:11:07,610 --> 01:11:09,280
或者我现在我就中断掉

1295
01:11:09,290 --> 01:11:10,110
我重新进来

1296
01:11:12,040 --> 01:11:14,420
让大家容易理解一下这个问题

1297
01:11:16,920 --> 01:11:19,390
是说理解一下这个轮胎某事有

1298
01:11:19,400 --> 01:11:20,050
什么用呢

1299
01:11:21,510 --> 01:11:23,150
先把这些断点打掉

1300
01:11:23,320 --> 01:11:24,270
删掉

1301
01:11:39,170 --> 01:11:39,650
好

1302
01:11:39,660 --> 01:11:41,670
我们先得bug1下看看

1303
01:11:53,160 --> 01:11:53,690
好

1304
01:11:53,700 --> 01:11:55,750
我们进来我们可以看到

1305
01:11:58,510 --> 01:11:59,900
它刚进来的时候

1306
01:11:59,910 --> 01:12:04,710
这个时间是怎么样的

1307
01:12:18,990 --> 01:12:19,310
好

1308
01:12:19,320 --> 01:12:21,530
我们再看一下这个时间以后做

1309
01:12:21,540 --> 01:12:22,410
一个比较

1310
01:12:34,610 --> 01:12:39,050
其实他这个胎毛呢也是获取到了

1311
01:12:39,060 --> 01:12:41,170
也是通过这个态

1312
01:12:41,410 --> 01:12:42,800
就说也是这一个

1313
01:12:42,810 --> 01:12:46,080
因为KI let去设置

1314
01:12:46,900 --> 01:12:49,330
我们可以再加一些断点看一下

1315
01:12:53,140 --> 01:12:54,390
我们稍微看一下

1316
01:13:15,880 --> 01:13:16,380
好

1317
01:13:16,420 --> 01:13:17,890
再打一下这个断点

1318
01:13:34,460 --> 01:13:36,070
其实大家可以看一下

1319
01:13:36,080 --> 01:13:37,870
就是说一开始的话

1320
01:13:37,880 --> 01:13:39,470
它这个值是零来的

1321
01:13:43,190 --> 01:13:45,380
当然这个时间是获取到了一个

1322
01:13:45,390 --> 01:13:46,740
系统的一个时间

1323
01:13:50,370 --> 01:13:52,660
由进来呢我们可以开始看一下

1324
01:13:52,670 --> 01:13:53,560
这个B类直

1325
01:13:54,170 --> 01:13:58,150
这里为什么是是真的一个东西

1326
01:13:58,160 --> 01:14:02,000
呢因为因为刚开始的时候

1327
01:14:02,040 --> 01:14:04,730
我们还没有显示一张数据的时候

1328
01:14:04,880 --> 01:14:06,400
这里返回来了

1329
01:14:07,270 --> 01:14:09,410
是直接返回这个丢类型的

1330
01:14:10,960 --> 01:14:13,330
就是说我们可以看一下这个判断

1331
01:14:13,340 --> 01:14:14,030
条件

1332
01:14:18,800 --> 01:14:20,810
这里点选小于等于0的时候

1333
01:14:20,820 --> 01:14:21,830
它就直接进来

1334
01:14:22,150 --> 01:14:24,170
就返回这一帧的一个丢类型

1335
01:14:26,790 --> 01:14:29,480
它只有后面就说第二针开始才是

1336
01:14:29,490 --> 01:14:32,920
真正的去算当前一针跟上一层的

1337
01:14:32,930 --> 01:14:33,520
一个

1338
01:14:34,240 --> 01:14:35,580
拉斯德莱隼

1339
01:14:39,760 --> 01:14:42,010
然后我们再一步步地去跑一下

1340
01:14:42,020 --> 01:14:42,530
看看

1341
01:14:49,260 --> 01:14:51,910
就说因为这里一开始他是初始化

1342
01:14:51,920 --> 01:14:57,520
为0A能再往下看

1343
01:14:58,210 --> 01:15:02,700
其实这里呢是说这里事就是说我

1344
01:15:02,710 --> 01:15:04,000
这个时间点还没到

1345
01:15:04,110 --> 01:15:06,360
所以我要等一下就go to

1346
01:15:06,370 --> 01:15:07,250
 disk尔

1347
01:15:07,330 --> 01:15:08,340
其实它go to

1348
01:15:08,350 --> 01:15:09,210
 display

1349
01:15:09,500 --> 01:15:11,670
他并不是真正的显示数据

1350
01:15:11,710 --> 01:15:14,110
因为他有条件变量去控制

1351
01:15:14,480 --> 01:15:15,830
大家可以看一下

1352
01:15:18,110 --> 01:15:19,440
大家大家可以看一下

1353
01:15:19,450 --> 01:15:21,550
它是要通过这个变量是唯一

1354
01:15:21,590 --> 01:15:24,160
它才真正的去刷新一帧数据

1355
01:15:24,350 --> 01:15:26,030
所以相当于我是go to

1356
01:15:26,040 --> 01:15:26,770
 display

1357
01:15:27,100 --> 01:15:28,190
这一个变量

1358
01:15:28,230 --> 01:15:30,880
这个for three PS

1359
01:15:31,500 --> 01:15:33,050
这个变量不质疑的话

1360
01:15:33,060 --> 01:15:35,370
那它是只是直接退出来

1361
01:15:37,630 --> 01:15:37,920
好

1362
01:15:37,930 --> 01:15:38,760
我们再往下看

1363
01:15:38,770 --> 01:15:46,020
吧我们可以看到这个太猛

1364
01:15:46,030 --> 01:15:47,400
他做一个初始化

1365
01:15:47,690 --> 01:15:50,010
然后他这个时候就来判断

1366
01:15:50,250 --> 01:15:53,720
就是说判断我这一层数据是不是

1367
01:15:53,730 --> 01:15:54,720
已经落后了

1368
01:15:58,490 --> 01:15:59,720
我们可以看得到

1369
01:15:59,730 --> 01:16:00,980
就说刚开始的话

1370
01:16:00,990 --> 01:16:06,230
因为它这个时钟实际上这里只是

1371
01:16:06,240 --> 01:16:07,170
为零勒

1372
01:16:09,730 --> 01:16:11,730
当然这里因为它加上了一针

1373
01:16:11,870 --> 01:16:14,240
它这个时候第一帧肯定是说会

1374
01:16:14,250 --> 01:16:14,970
落后的

1375
01:16:24,340 --> 01:16:25,830
我们一步步的往下走

1376
01:16:27,630 --> 01:16:29,640
就是说我们这里就看得到

1377
01:16:30,850 --> 01:16:32,620
不管就是说是audio还是

1378
01:16:32,630 --> 01:16:33,060
video

1379
01:16:33,070 --> 01:16:34,000
做master的时候

1380
01:16:34,010 --> 01:16:37,380
其实他都会去设置自己自己的

1381
01:16:37,390 --> 01:16:38,160
一个时钟

1382
01:16:38,570 --> 01:16:40,980
就会去设置自己的一个时间轴

1383
01:16:41,570 --> 01:16:43,520
大家可以稍微自己去看一下

1384
01:16:47,070 --> 01:16:49,540
我们就可以看得到他这里是设置

1385
01:16:49,550 --> 01:16:52,240
这个B点的一个始终根据这一个

1386
01:16:52,250 --> 01:16:52,880
pps

1387
01:16:52,930 --> 01:16:54,530
pps去设置

1388
01:17:01,060 --> 01:17:02,830
我们在一步步的往下走

1389
01:17:04,890 --> 01:17:06,120
大家再看一下

1390
01:17:06,130 --> 01:17:08,220
它这里是做一个判断

1391
01:17:08,620 --> 01:17:10,800
就是说判断一下

1392
01:17:10,810 --> 01:17:13,740
我就说队列里面是不是还有真

1393
01:17:14,120 --> 01:17:15,790
如果还有真的话

1394
01:17:15,800 --> 01:17:18,930
我可能就是要去考虑要不要抓我

1395
01:17:18,940 --> 01:17:21,580
真如果它队列里面没有争

1396
01:17:21,620 --> 01:17:23,640
可能就我就考虑要把这些真是

1397
01:17:23,650 --> 01:17:24,950
不是显示出来算

1398
01:17:27,670 --> 01:17:28,080
好

1399
01:17:28,090 --> 01:17:29,180
我们这里是

1400
01:17:29,770 --> 01:17:31,470
那就是说他还有一针

1401
01:17:31,510 --> 01:17:32,950
如果他能进来的话

1402
01:17:38,720 --> 01:17:41,020
它这里头就是拿下一针

1403
01:17:41,310 --> 01:17:44,140
跟当前这一帧准备要显示了一个

1404
01:17:44,270 --> 01:17:46,470
做一个就说计算出这个丢雷笋

1405
01:17:52,170 --> 01:17:55,380
这里面就是要他这个时候

1406
01:17:56,130 --> 01:17:59,420
他要算一下是不是已经落后了

1407
01:18:00,930 --> 01:18:02,200
落后魏征的话

1408
01:18:02,210 --> 01:18:06,620
他就要重新去要重新去给一真心

1409
01:18:06,630 --> 01:18:07,470
的一个数

1410
01:18:08,000 --> 01:18:09,630
给人新的数据

1411
01:18:27,140 --> 01:18:29,720
我们可以看一下刚才说这个条件

1412
01:18:29,730 --> 01:18:30,230
变量

1413
01:18:40,170 --> 01:18:42,120
因为他这里说不成立的话

1414
01:18:42,130 --> 01:18:44,200
那就他要把这一层数据给显示

1415
01:18:44,210 --> 01:18:44,840
出来

1416
01:18:50,760 --> 01:18:52,730
这里呢大家要注意一下

1417
01:18:52,770 --> 01:18:55,070
这里才是真正的白

1418
01:18:55,080 --> 01:18:58,260
就是说白帧数据退出退出队列

1419
01:19:00,020 --> 01:19:01,980
但大家要注意的一点是

1420
01:19:02,020 --> 01:19:05,260
他如果里面只有一帧数据的时候

1421
01:19:05,300 --> 01:19:09,500
它会把它保存一下

1422
01:19:09,660 --> 01:19:11,770
大家注意一下这一个操作是什么

1423
01:19:11,780 --> 01:19:12,520
意思

1424
01:19:14,240 --> 01:19:15,680
就说class

1425
01:19:16,540 --> 01:19:20,130
就这意思是如果我是里面只有一

1426
01:19:20,140 --> 01:19:22,830
帧数据说或者是最后一帧的话

1427
01:19:24,440 --> 01:19:28,170
那我可能我会先不丢他这里这

1428
01:19:28,180 --> 01:19:29,820
变量媒质为一的时候

1429
01:19:29,860 --> 01:19:31,290
我先不丢他

1430
01:19:39,150 --> 01:19:42,860
他这种做法是为了上面这里

1431
01:19:42,900 --> 01:19:48,330
就是说上面这一个函数和这个

1432
01:19:48,340 --> 01:19:51,130
flame快PK啦it为了

1433
01:19:51,140 --> 01:19:53,020
这里能拿到一些数据

1434
01:19:53,530 --> 01:19:55,620
大家可以对比一下这两个有什么

1435
01:19:55,630 --> 01:19:56,280
区别

1436
01:19:59,410 --> 01:20:00,910
大家可以对比一下

1437
01:20:04,380 --> 01:20:07,810
这里拿到是永远是说我最后一次

1438
01:20:07,820 --> 01:20:08,940
显示的数据

1439
01:20:19,460 --> 01:20:21,350
大家对比一下这两个函数

1440
01:20:26,690 --> 01:20:27,400
对比一下

1441
01:20:27,410 --> 01:20:28,560
看看有什么不同

1442
01:20:28,570 --> 01:20:30,050
为什么要这么实现

1443
01:20:32,710 --> 01:20:33,940
重点是哪里

1444
01:20:33,950 --> 01:20:37,600
呢重点是这一个是否唯一

1445
01:20:38,280 --> 01:20:39,490
这里如果不唯一

1446
01:20:39,500 --> 01:20:40,990
他们基本上是一样的

1447
01:20:49,900 --> 01:20:50,350
好

1448
01:20:50,360 --> 01:20:51,490
我们继续讲同步

1449
01:20:51,500 --> 01:20:54,540
啊因为刚才讲到video这里

1450
01:20:54,550 --> 01:20:57,280
它涉及到一个跟last真一个

1451
01:20:57,290 --> 01:20:57,990
问题

1452
01:20:58,030 --> 01:21:00,060
还有在当前帧的一个问题

1453
01:21:00,240 --> 01:21:03,370
所以我们也对这个函数稍微讲解

1454
01:21:03,380 --> 01:21:04,010
了一下

1455
01:21:04,400 --> 01:21:06,510
让大家回去好好看一下

1456
01:21:19,790 --> 01:21:22,250
其实大家就可以看得到

1457
01:21:23,300 --> 01:21:26,150
执行到下面的流程就是一个正常

1458
01:21:26,160 --> 01:21:27,430
播放的一个流程了

1459
01:21:29,700 --> 01:21:31,700
周长播放下来我们看一下

1460
01:21:32,370 --> 01:21:34,700
他就会跑到这个BDODSK

1461
01:21:34,710 --> 01:21:36,410
里面去拨一层数据

1462
01:21:36,450 --> 01:21:38,090
就说刷新一层数据

1463
01:21:44,710 --> 01:21:46,700
那这里应该就比较容易理解了

1464
01:21:52,260 --> 01:21:55,190
其实实际上就是说播播放一层

1465
01:21:55,200 --> 01:21:55,650
数据

1466
01:21:55,660 --> 01:21:58,070
它是通通过这个video面积

1467
01:21:58,300 --> 01:21:59,650
display进行的

1468
01:22:02,860 --> 01:22:04,310
大家有没有注意到

1469
01:22:04,320 --> 01:22:06,710
其实这里又有一个pic

1470
01:22:06,720 --> 01:22:07,330
 last

1471
01:22:08,910 --> 01:22:11,940
刚才我们说那一个做法就是为了

1472
01:22:12,390 --> 01:22:14,990
让他这里能拿到一些数据

1473
01:22:24,060 --> 01:22:26,310
大家可以后面去好好去看一下

1474
01:22:26,320 --> 01:22:29,320
体会一下他为什么要这么去设计

1475
01:22:35,350 --> 01:22:37,420
但是大家要理解的是

1476
01:22:39,270 --> 01:22:40,720
我先说一下

1477
01:22:44,990 --> 01:22:46,950
要理解的是当前

1478
01:22:46,990 --> 01:22:58,740
就说我们刚才这里这一个VP我

1479
01:22:58,750 --> 01:23:29,440
答写出来吧这里面的一个VP和

1480
01:23:29,450 --> 01:23:31,760
这个last的一个VP是一样

1481
01:23:31,770 --> 01:23:32,040
的

1482
01:23:32,270 --> 01:23:34,160
就说是指向同一样的

1483
01:23:34,500 --> 01:23:35,930
同一层数据来的

1484
01:24:13,240 --> 01:24:15,290
大家相互要自己去理解一下

1485
01:24:15,300 --> 01:24:16,670
我刚才说到这里

1486
01:24:17,040 --> 01:24:20,320
就说VPRS这一个VP但他们

1487
01:24:20,330 --> 01:24:22,560
虽然说调用的函数是不一样

1488
01:24:23,240 --> 01:24:24,530
到底是为什么呢

1489
01:24:24,880 --> 01:24:28,610
是因为他做这里已经把这一张图

1490
01:24:28,620 --> 01:24:31,060
已经出队列了

1491
01:24:42,460 --> 01:24:44,750
因为他这里已经做了一个操作了

1492
01:24:55,200 --> 01:24:56,730
我不知道大家明白了没有

1493
01:24:56,880 --> 01:24:59,410
这里为什么两个是同一个东西

1494
01:25:07,150 --> 01:25:08,340
之后我们再看一下

1495
01:25:08,350 --> 01:25:09,480
吧就是说看一下

1496
01:25:09,860 --> 01:25:12,930
他video要等待的时候是

1497
01:25:12,940 --> 01:25:13,380
怎么样的

1498
01:25:13,390 --> 01:25:14,950
我们可以稍微打一个锻炼

1499
01:25:15,150 --> 01:25:16,690
打一个端点看一下

1500
01:25:17,750 --> 01:25:18,600
看一下go to

1501
01:25:18,610 --> 01:25:19,620
 display里面

1502
01:25:31,360 --> 01:25:33,040
看他们能不能跑进来

1503
01:25:42,110 --> 01:25:42,660
好

1504
01:25:42,670 --> 01:25:44,780
我们可以看得到他进来的话是

1505
01:25:44,790 --> 01:25:45,680
怎么样子

1506
01:25:54,930 --> 01:25:57,330
噢这个没打没跑进来这个事

1507
01:25:58,020 --> 01:25:59,410
这不是这个断点

1508
01:26:00,920 --> 01:26:01,390
好

1509
01:26:01,430 --> 01:26:01,970
进来了

1510
01:26:01,980 --> 01:26:04,680
就是这里要等待一下播放

1511
01:26:04,690 --> 01:26:06,480
我们可以计算出来

1512
01:26:06,490 --> 01:26:08,040
看一下这个时间是多少

1513
01:26:11,690 --> 01:26:12,840
大家要注意一下

1514
01:26:12,850 --> 01:26:16,470
为什么这里是一个十毫秒就说0

1515
01:26:16,480 --> 01:26:17,050
1秒

1516
01:26:17,090 --> 01:26:18,430
他为什么要这样子呢

1517
01:26:18,790 --> 01:26:21,920
是因为他这里做十里埔的时候

1518
01:26:22,080 --> 01:26:25,010
他最最长的一个休眠时间

1519
01:26:25,020 --> 01:26:26,220
他是十毫秒内

1520
01:26:26,420 --> 01:26:29,650
他是这里有一个FF命令的一个

1521
01:26:29,660 --> 01:26:30,290
计算

1522
01:26:32,180 --> 01:26:34,730
我们可以看一下它实际是多少

1523
01:26:34,770 --> 01:26:37,340
看能不能求出来

1524
01:26:39,770 --> 01:26:43,630
就是说它其实实际上是要休眠

1525
01:26:44,290 --> 01:26:46,500
都是17毫秒这样子

1526
01:26:52,500 --> 01:26:56,350
大家可以退出来看一下我执行下

1527
01:27:06,000 --> 01:27:09,460
上我们还是在这里用这个函数

1528
01:27:09,470 --> 01:27:10,160
推出来的

1529
01:27:12,830 --> 01:27:14,120
其实就可以看得到

1530
01:27:14,130 --> 01:27:18,180
这里边再回来后他就要做休眠的

1531
01:27:18,190 --> 01:27:19,020
一个操作了

1532
01:27:25,430 --> 01:27:26,400
大家可以看得到

1533
01:27:26,410 --> 01:27:28,550
这里要做一个休眠的一个操作

1534
01:27:30,500 --> 01:27:32,430
我们再看一下这个函数

1535
01:27:32,870 --> 01:27:34,060
就是刚才我讲了

1536
01:27:34,070 --> 01:27:35,980
就是说决定了每一次最长的一个

1537
01:27:35,990 --> 01:27:36,900
休眠时间

1538
01:27:37,410 --> 01:27:39,500
其实他这个是为了保证这一个

1539
01:27:39,510 --> 01:27:40,510
刷新率

1540
01:27:40,570 --> 01:27:43,130
或者或者这个响应速度

1541
01:27:44,340 --> 01:27:46,290
如果你这里受到太长

1542
01:27:46,300 --> 01:27:48,010
会影响这个响应

1543
01:28:10,200 --> 01:28:10,930
先退出

1544
01:28:10,940 --> 01:28:11,650
来这里行了

1545
01:28:16,650 --> 01:28:17,700
我们再讲一下

1546
01:28:17,710 --> 01:28:18,900
OTO就说

1547
01:28:20,020 --> 01:28:21,730
BTL这边讲的差不多

1548
01:28:21,740 --> 01:28:22,870
我们再讲一下

1549
01:28:23,230 --> 01:28:24,260
audio的

1550
01:28:24,310 --> 01:28:26,380
首先在讲一下那个硬件那一个

1551
01:28:26,390 --> 01:28:26,940
问题

1552
01:28:29,470 --> 01:28:31,100
当然了我不知道video

1553
01:28:31,110 --> 01:28:33,670
但是这里大家有没有一定的理解

1554
01:28:36,410 --> 01:28:39,260
就是说这一个我再讲一下

1555
01:28:39,270 --> 01:28:40,650
吧这个妇人太猛

1556
01:28:40,870 --> 01:28:41,980
这个时间

1557
01:28:42,820 --> 01:28:48,810
他不是不是由那个ps来就就说

1558
01:28:48,850 --> 01:28:51,050
不是由pps还权决定了

1559
01:28:51,240 --> 01:28:56,160
它是要通过只是计算这个B类的

1560
01:28:56,170 --> 01:28:57,970
一个值来相加

1561
01:28:57,980 --> 01:29:07,390
哎当然这里可能准备的不够充分

1562
01:29:07,440 --> 01:29:10,000
不是特别好去讲解这个问题

1563
01:29:10,450 --> 01:29:12,280
因为这里都都是一个代码

1564
01:29:12,290 --> 01:29:14,000
讲起来就比较抽象

1565
01:29:14,990 --> 01:29:17,220
我们先讲一下那个audio

1566
01:29:17,370 --> 01:29:19,080
硬件八分的一个问题

1567
01:29:19,090 --> 01:29:39,700
吧我们先看一下这个打开这个

1568
01:29:39,710 --> 01:29:40,970
sd R的时候

1569
01:29:41,050 --> 01:29:42,930
主要做哪一些操作

1570
01:29:45,400 --> 01:29:46,690
至少我们可以看一下

1571
01:29:46,700 --> 01:29:50,640
为什么它那个回调函数一直是来

1572
01:29:50,650 --> 01:29:52,840
拿一个81921个数据

1573
01:29:57,180 --> 01:29:59,430
其实我们在断点执行一下

1574
01:29:59,440 --> 01:30:13,770
吧大家可以稍微近这一个函数

1575
01:30:13,780 --> 01:30:14,750
里面看一下

1576
01:30:15,030 --> 01:30:18,070
这个O点open的时候

1577
01:30:23,900 --> 01:30:27,070
这个O点open会有就说

1578
01:30:27,200 --> 01:30:30,510
初始化这个SDR的一个操作

1579
01:30:35,180 --> 01:30:37,280
我们看一下这里是传进来是什么

1580
01:30:37,290 --> 01:30:37,980
意思

1581
01:30:40,410 --> 01:30:42,580
看一下这里是由哪里传进来

1582
01:30:42,930 --> 01:30:44,670
其实这个O点open之前

1583
01:30:44,680 --> 01:30:47,680
它是先获取到了我们当前

1584
01:30:47,880 --> 01:30:50,670
audio会解出怎么样一个

1585
01:30:50,680 --> 01:30:51,250
什么类

1586
01:30:51,260 --> 01:30:53,930
以及它这个采用率之类的一些

1587
01:30:53,940 --> 01:30:54,670
东西

1588
01:30:54,710 --> 01:30:58,070
以及它这个一个采样深度

1589
01:30:58,680 --> 01:31:01,130
还有它是多少通道的一个数据

1590
01:31:04,800 --> 01:31:07,440
但是我们只是说我们想要这种

1591
01:31:07,580 --> 01:31:08,170
频率

1592
01:31:08,180 --> 01:31:11,130
或者想要这种传统术

1593
01:31:11,180 --> 01:31:12,810
但实际上硬件是怎么样

1594
01:31:12,820 --> 01:31:16,600
呢我们可能要设置进去以后再读

1595
01:31:16,930 --> 01:31:19,160
它里面这里再返回来看一下

1596
01:31:19,760 --> 01:31:21,750
我们可以对比一下这两个参数

1597
01:31:56,700 --> 01:31:56,910
好

1598
01:31:56,920 --> 01:31:58,440
我们先执行一下

1599
01:31:59,980 --> 01:32:02,070
因为现在这里其实还没执行

1600
01:32:06,540 --> 01:32:08,550
你这个时候再看一下

1601
01:32:12,740 --> 01:32:15,210
可以稍微去对比一下这两圈

1602
01:32:15,220 --> 01:32:18,380
哦然后这里的格式也是一样的

1603
01:32:18,390 --> 01:32:19,480
他会支持

1604
01:32:20,190 --> 01:32:22,690
然后这个什么类也是可以

1605
01:32:25,100 --> 01:32:26,850
这牲口也是可以的

1606
01:32:34,020 --> 01:32:37,210
但这个赛事是是吧

1607
01:32:37,220 --> 01:32:38,170
192

1608
01:32:40,280 --> 01:32:42,990
就说他这里内部是一个819

1609
01:32:43,000 --> 01:32:59,170
噢这里我们就会在就是说设置

1610
01:32:59,180 --> 01:32:59,730
一下

1611
01:33:00,710 --> 01:33:03,160
作为重采样的时候一个参数

1612
01:33:07,300 --> 01:33:09,190
其实这种应该比较容易理解了

1613
01:33:09,200 --> 01:33:10,370
这这一部分

1614
01:33:11,290 --> 01:33:13,860
就是说要计算一下这种真正

1615
01:33:14,340 --> 01:33:16,330
就是说从里面获取出来它这个

1616
01:33:16,340 --> 01:33:17,250
传统术

1617
01:33:17,590 --> 01:33:19,440
以及这种什么类之类的

1618
01:33:24,290 --> 01:33:25,670
我们可以看得到

1619
01:33:25,920 --> 01:33:28,530
其实它硬件呢就是说每次要拿

1620
01:33:28,540 --> 01:33:29,150
多少数据

1621
01:33:29,160 --> 01:33:31,110
是由这一个赛事决定的

1622
01:33:35,160 --> 01:33:37,570
当然我们可以就是这里这一个

1623
01:33:37,580 --> 01:33:40,670
赛事去决定我们每次这个回调

1624
01:33:40,680 --> 01:33:42,760
函数是要拿多长一个数据

1625
01:33:45,750 --> 01:33:47,360
大家可以稍微看一下

1626
01:34:10,020 --> 01:34:11,580
这里是8192

1627
01:34:14,620 --> 01:34:16,520
他们只需要跑起来的

1628
01:34:18,780 --> 01:34:20,290
或者我加一些打印

1629
01:34:20,610 --> 01:34:21,680
大家可以看一下

1630
01:34:22,220 --> 01:34:31,950
就说每次这里是拿到8192的

1631
01:34:31,960 --> 01:34:33,130
一个长度数据

1632
01:34:33,650 --> 01:34:36,600
其实它这一个间隔是比较固定的

1633
01:34:36,640 --> 01:34:37,930
只是现在是第八个

1634
01:34:38,510 --> 01:34:40,360
这里会卡住了一下

1635
01:34:40,660 --> 01:34:43,010
我们可以直接执行一下看看

1636
01:34:44,240 --> 01:34:46,490
我们先看一下这个是在哪里

1637
01:34:53,040 --> 01:34:54,970
其实是在这里打印出来

1638
01:34:54,980 --> 01:34:56,350
大家可以稍微去看一下

1639
01:34:56,360 --> 01:34:57,990
这个是在哪里打出来的

1640
01:35:02,490 --> 01:35:04,030
我重新折写一下

1641
01:35:07,230 --> 01:35:11,630
嗯我们就可以看得到这种

1642
01:35:11,640 --> 01:35:15,030
其实它间隔是比较就是说相对

1643
01:35:15,040 --> 01:35:16,590
来说比较稳定的

1644
01:35:20,950 --> 01:35:22,340
那这里是比较稳定

1645
01:35:33,640 --> 01:35:36,580
我不知道大家今天能不能理解一

1646
01:35:36,590 --> 01:35:37,240
部分

1647
01:35:39,170 --> 01:35:42,220
因为这个音视频同步是有一些

1648
01:35:42,230 --> 01:35:43,190
抽象

1649
01:35:44,110 --> 01:35:45,860
不是特别好理解

1650
01:35:57,190 --> 01:36:00,020
我们再来看一下刚才说一些其他

1651
01:36:00,030 --> 01:36:01,060
同步的方式

1652
01:36:01,070 --> 01:36:11,240
吧就是就说不管是他有同步方式

1653
01:36:11,250 --> 01:36:12,180
不一样的时候

1654
01:36:12,190 --> 01:36:15,520
其实它就是通过这种判断介绍

1655
01:36:15,530 --> 01:36:16,810
条件去判断

1656
01:36:18,150 --> 01:36:20,500
比如我们这里我们稍微看一下这

1657
01:36:20,510 --> 01:36:22,620
一个函数跟master心可

1658
01:36:22,630 --> 01:36:23,240
开口

1659
01:36:23,450 --> 01:36:25,300
这个为什么要讲一下这个

1660
01:36:25,310 --> 01:36:27,940
呢因为他这里做了一些异常的

1661
01:36:27,950 --> 01:36:28,690
一些处理

1662
01:36:29,110 --> 01:36:32,290
比如我这里本身是B调must

1663
01:36:32,300 --> 01:36:35,130
就是说本身我可能收到一个视频

1664
01:36:35,170 --> 01:36:36,190
作为基准

1665
01:36:36,340 --> 01:36:38,680
然后我来去检测的时候

1666
01:36:38,690 --> 01:36:41,530
我发现其实我这个文件并没有

1667
01:36:41,540 --> 01:36:42,350
视频

1668
01:36:42,460 --> 01:36:45,750
那这个时候我就会返回是一个

1669
01:36:45,760 --> 01:36:48,170
audio同步的一个方式

1670
01:36:48,430 --> 01:36:50,460
就说你一个多媒体文件

1671
01:36:50,960 --> 01:36:52,130
如果你没有视频

1672
01:36:52,140 --> 01:36:53,350
那你肯定要有音频

1673
01:36:53,360 --> 01:36:55,830
吧嗯不可能两者都没有

1674
01:36:56,560 --> 01:36:57,650
然后我们再看一下

1675
01:36:57,660 --> 01:36:59,690
如果它是受到一个oo点同步

1676
01:36:59,700 --> 01:37:00,370
方式

1677
01:37:00,770 --> 01:37:03,660
他也会去检测一下有没有音频流

1678
01:37:03,940 --> 01:37:06,190
如果这时候都没有音频流

1679
01:37:06,380 --> 01:37:09,920
那你肯定就用音频做同步是没有

1680
01:37:09,960 --> 01:37:10,480
没有

1681
01:37:10,800 --> 01:37:11,850
知道没有用了

1682
01:37:12,390 --> 01:37:14,540
这时候他就用外部时钟的同步

1683
01:37:14,550 --> 01:37:15,200
方式

1684
01:37:16,890 --> 01:37:17,700
我们再看一下

1685
01:37:17,710 --> 01:37:18,870
这里呢就说

1686
01:37:19,740 --> 01:37:21,270
如果你说的是外部时钟

1687
01:37:21,310 --> 01:37:24,360
那我不管你有没有哪肿瘤没有

1688
01:37:24,400 --> 01:37:26,700
我都是反映了就是外部松

1689
01:37:27,160 --> 01:37:29,010
白鹿始终的一个同步方式

1690
01:37:33,920 --> 01:37:36,910
讲了这个这种不同的同步方式

1691
01:37:36,920 --> 01:37:39,960
我们看说的就说我们会讲一下

1692
01:37:39,970 --> 01:37:43,170
这个FFK它外部时钟同步的

1693
01:37:43,180 --> 01:37:43,350
时候

1694
01:37:43,360 --> 01:37:44,430
他是怎么去设置

1695
01:37:44,440 --> 01:37:45,610
这个外部始终

1696
01:37:48,350 --> 01:37:50,100
我们可以稍微搜索一下

1697
01:38:02,790 --> 01:38:04,580
其实我们可以看得到

1698
01:38:04,590 --> 01:38:08,140
就是说在设置audio和

1699
01:38:08,150 --> 01:38:09,020
video的时候

1700
01:38:09,030 --> 01:38:11,490
我们都会去设一下这

1701
01:38:11,640 --> 01:38:13,550
就说去试一下

1702
01:38:13,560 --> 01:38:15,730
看看要不要设这个外部始终

1703
01:38:19,680 --> 01:38:21,310
大家可以看一下

1704
01:38:21,320 --> 01:38:24,590
这一个是就说有你要用外部使用

1705
01:38:24,600 --> 01:38:26,150
你可以看一下这个函数

1706
01:38:28,440 --> 01:38:29,370
它怎么样

1707
01:38:29,410 --> 01:38:31,210
是说呢这里可以看一下

1708
01:38:31,220 --> 01:38:34,500
他什么时候才去初始化这个外部

1709
01:38:34,510 --> 01:38:34,920
使用

1710
01:38:34,930 --> 01:38:38,920
呢其实他这里是要做一些条件和

1711
01:38:38,930 --> 01:38:39,580
判断

1712
01:38:39,920 --> 01:38:42,680
就比如这里他会先看一下

1713
01:38:42,730 --> 01:38:44,730
audio和video跟当前

1714
01:38:44,740 --> 01:38:47,510
这个外部始终它这个差值是有

1715
01:38:47,520 --> 01:38:48,140
多少

1716
01:38:48,600 --> 01:38:50,530
如果超过一定的差值

1717
01:38:51,230 --> 01:38:54,440
他才会去就是说修改这个外部

1718
01:38:54,450 --> 01:38:55,010
时钟

1719
01:38:55,820 --> 01:38:56,940
其实怎么说

1720
01:38:56,980 --> 01:38:59,730
如果你用外部始终做服务方式

1721
01:38:59,920 --> 01:39:01,610
那肯定是一开始

1722
01:39:02,480 --> 01:39:04,250
因为这种直读出来

1723
01:39:05,470 --> 01:39:07,540
它是就说差别是很大的

1724
01:39:07,550 --> 01:39:10,980
所以他就会设一下这个用包点货

1725
01:39:10,990 --> 01:39:12,620
我用video去设一下这个

1726
01:39:12,630 --> 01:39:13,380
外部时钟

1727
01:39:14,300 --> 01:39:17,710
但是后面呢就就说后面你发现

1728
01:39:17,720 --> 01:39:21,580
这个这个条件并不满足了

1729
01:39:21,590 --> 01:39:24,180
那他就要在外部始终一直在跑

1730
01:39:24,190 --> 01:39:26,140
沿着一个时间轴去跑就好了

1731
01:39:30,340 --> 01:39:31,690
我不知道大家明白了没有

1732
01:39:31,700 --> 01:39:35,060
就是说外部始终在FF类里面

1733
01:39:35,100 --> 01:39:37,500
其实是audio或者

1734
01:39:37,510 --> 01:39:38,640
video去设置

1735
01:39:38,650 --> 01:39:42,580
啊只是说他要看这个始终是否

1736
01:39:42,590 --> 01:39:44,040
已经初始化过了

1737
01:39:44,630 --> 01:39:47,320
或者他是否达到一定阈值才去

1738
01:39:47,330 --> 01:39:48,010
设置

1739
01:39:59,730 --> 01:40:00,700
我再看一下

1740
01:40:00,710 --> 01:40:02,340
今天还有哪一些没有讲

1741
01:40:15,410 --> 01:40:18,990
今今天的一些基础的差不多是讲

1742
01:40:19,000 --> 01:40:19,700
到这里

1743
01:40:22,240 --> 01:40:25,130
当然可能今晚讲的有一些抽象

1744
01:40:26,020 --> 01:40:27,510
不是特别好理解

1745
01:40:28,640 --> 01:40:31,920
我们再看一下目前一个音视频

1746
01:40:31,960 --> 01:40:35,140
开发需求的要分析

1747
01:40:35,150 --> 01:40:36,320
吧我们先看一下

1748
01:40:36,840 --> 01:40:38,860
比如我们这个行业的一个需求

1749
01:40:38,870 --> 01:40:41,850
我们可以去看一下互联网行业

1750
01:40:41,910 --> 01:40:44,670
目前这种小视频都是比较流行的

1751
01:40:44,710 --> 01:40:46,350
比如快手或者抖音

1752
01:40:46,900 --> 01:40:50,130
它以及这种就是说视频门户网站

1753
01:40:50,170 --> 01:40:51,860
比如腾讯啊爱奇艺

1754
01:40:51,870 --> 01:40:55,530
啊还有这个视频通话

1755
01:40:55,570 --> 01:40:57,610
比如微信qq skype1

1756
01:40:57,870 --> 01:41:00,260
这种这种互联网产品

1757
01:41:00,270 --> 01:41:03,190
它都是需要这种大量的一个音

1758
01:41:03,200 --> 01:41:04,410
视频开发演员

1759
01:41:05,340 --> 01:41:07,830
我们再看一下这个半导体行业

1760
01:41:08,800 --> 01:41:09,790
半导体行业

1761
01:41:09,800 --> 01:41:11,710
比如手机啊平板啊机顶盒

1762
01:41:11,720 --> 01:41:12,910
电视芯片这种

1763
01:41:13,800 --> 01:41:17,150
它都是需要这种音视频驱动开发

1764
01:41:17,160 --> 01:41:19,170
以及音视频中间件的一个开发

1765
01:41:19,180 --> 01:41:19,550
人员

1766
01:41:21,670 --> 01:41:23,990
我们再看一下这个安防行业

1767
01:41:24,310 --> 01:41:25,230
安防行业

1768
01:41:25,240 --> 01:41:28,000
呢比如家庭摄像头以及这种公共

1769
01:41:28,010 --> 01:41:28,680
摄像头

1770
01:41:29,860 --> 01:41:30,810
公共相投

1771
01:41:30,820 --> 01:41:33,490
就是说比如海康大华是这种都是

1772
01:41:33,500 --> 01:41:34,510
大公司来的

1773
01:41:35,260 --> 01:41:39,020
当然像小鱼以及水滴这种公司也

1774
01:41:39,060 --> 01:41:39,950
是挺大的

1775
01:41:40,890 --> 01:41:44,100
都是属于360啊或者这个小米

1776
01:41:44,110 --> 01:41:44,360
的

1777
01:41:46,470 --> 01:41:49,460
就是说可以从这个行业需求来看

1778
01:41:49,760 --> 01:41:52,580
这个音视频开发人员需求是非常

1779
01:41:52,590 --> 01:41:53,110
大的

1780
01:41:55,220 --> 01:41:57,650
我们再看一下这一个行业制造

1781
01:41:57,660 --> 01:41:58,390
就业前景

1782
01:41:58,400 --> 01:42:02,280
吧目前互联网上一些音视频的

1783
01:42:02,290 --> 01:42:05,070
一个流量逐年都是在增加了

1784
01:42:05,400 --> 01:42:09,200
所以这个音视频从业人员也是

1785
01:42:09,270 --> 01:42:10,600
一直有需求的

1786
01:42:10,650 --> 01:42:12,280
这个是有保证的

1787
01:42:13,160 --> 01:42:14,150
我们再看一下

1788
01:42:14,280 --> 01:42:17,110
说国内半导体芯片也是在蓬勃

1789
01:42:17,120 --> 01:42:17,710
发展

1790
01:42:18,070 --> 01:42:20,120
现在国家都是大力发展

1791
01:42:20,640 --> 01:42:23,570
就说自己有自己知识产权的一个

1792
01:42:23,580 --> 01:42:24,290
半导体

1793
01:42:24,480 --> 01:42:27,170
所以这个也是需要大量的一个音

1794
01:42:27,180 --> 01:42:28,210
视频开发人员

1795
01:42:30,140 --> 01:42:33,750
以及我们目前这个国家一个水量

1796
01:42:33,760 --> 01:42:34,470
工程

1797
01:42:34,740 --> 01:42:37,010
国家雪亮工程是什么意思呢

1798
01:42:37,320 --> 01:42:39,630
就是说我们要把这些安防的一个

1799
01:42:39,640 --> 01:42:40,330
摄像头

1800
01:42:40,810 --> 01:42:43,690
不知道每一个村落说

1801
01:42:43,990 --> 01:42:46,640
就说不只是城市里面或者现场

1802
01:42:46,650 --> 01:42:48,740
里面有这种安防摄像头

1803
01:42:49,200 --> 01:42:53,340
还是乡镇以及乡村都要有这种

1804
01:42:53,350 --> 01:42:54,240
安防摄像头

1805
01:42:54,550 --> 01:42:57,240
所以他这一个需求还是非常大的

1806
01:42:59,100 --> 01:43:01,990
至少就是说从这种就业前景看

1807
01:43:02,930 --> 01:43:06,200
目前这个行业在短期内都没有

1808
01:43:06,210 --> 01:43:07,610
下滑的一个迹象

1809
01:43:11,320 --> 01:43:14,330
如果大家对音视频开发感兴趣的

1810
01:43:14,340 --> 01:43:14,550
话

1811
01:43:14,560 --> 01:43:17,950
就说可以去拉勾网搜索一下音

1812
01:43:17,960 --> 01:43:19,710
视频以及这个多媒体

1813
01:43:19,820 --> 01:43:23,100
看一下现他现在的一个薪资行情

1814
01:43:23,140 --> 01:43:25,810
以及看一下目前一些招聘的一个

1815
01:43:25,820 --> 01:43:26,440
需求

1816
01:43:30,760 --> 01:43:32,320
我们可以稍微看一下

1817
01:43:32,360 --> 01:43:34,490
目前一个音视频开发人员

1818
01:43:34,820 --> 01:43:36,750
他这个薪资都是比较高的

1819
01:43:36,760 --> 01:43:40,030
都是有20K左右2020到

1820
01:43:40,040 --> 01:43:41,350
25K左右

1821
01:43:44,500 --> 01:43:46,650
我们可以再看一下现在招聘的

1822
01:43:46,660 --> 01:43:47,380
一个需求

1823
01:43:47,810 --> 01:43:49,560
比如你要懂hr64

1824
01:43:49,570 --> 01:43:50,980
你要懂fm太葛

1825
01:43:51,530 --> 01:43:54,200
还要懂这种IC啊或者等这种

1826
01:43:54,210 --> 01:43:55,060
mp4

1827
01:43:56,070 --> 01:43:58,840
对这种流媒体协议则需要懂

1828
01:43:58,850 --> 01:44:01,820
这个RTMP http加TS

1829
01:44:01,830 --> 01:44:05,780
P这些内容

1830
01:44:05,790 --> 01:44:08,150
我们在后面的课程再做一个详细

1831
01:44:08,160 --> 01:44:08,890
的讲解

1832
01:44:11,820 --> 01:44:13,030
其实怎么说

1833
01:44:13,040 --> 01:44:14,620
呢其实总的来讲

1834
01:44:14,880 --> 01:44:17,450
音视频的一个招聘需求相对来说

1835
01:44:17,460 --> 01:44:23,110
都是就是说都是比较这个都是

1836
01:44:23,120 --> 01:44:23,870
差不多的

1837
01:44:23,880 --> 01:44:25,990
吧都是需要懂A和A iPad

1838
01:44:26,220 --> 01:44:28,950
以及相关一些流媒体协议以及

1839
01:44:28,960 --> 01:44:30,660
相关的一些抵扣的

1840
01:44:33,800 --> 01:44:34,090
好

1841
01:44:34,100 --> 01:44:36,460
我们再稍微看一下这个职业发展

1842
01:44:36,950 --> 01:44:38,760
就说做一些视频

1843
01:44:38,770 --> 01:44:41,040
你可以去半导体公司

1844
01:44:45,370 --> 01:44:48,110
算法实践能力是基本

1845
01:44:49,170 --> 01:44:51,880
那肯定啊你肯定要做工程的

1846
01:44:52,280 --> 01:44:54,780
现在只是说讲了一些基础知识

1847
01:44:54,790 --> 01:44:59,190
唉当然对这个算法而言则是你

1848
01:44:59,200 --> 01:45:00,010
不同

1849
01:45:00,290 --> 01:45:01,220
工程师

1850
01:45:01,230 --> 01:45:03,560
其实你这个懂算法的程度是不

1851
01:45:03,570 --> 01:45:04,060
一样的

1852
01:45:04,530 --> 01:45:06,880
就是说如果你只是做一些应用

1853
01:45:06,890 --> 01:45:07,420
开发

1854
01:45:07,430 --> 01:45:09,600
可能你这个算法不是需要特别

1855
01:45:09,610 --> 01:45:10,920
深入的去理解

1856
01:45:11,340 --> 01:45:13,980
但是你要做一个编码器或解码器

1857
01:45:13,990 --> 01:45:14,860
的一个优化

1858
01:45:15,620 --> 01:45:19,780
那你可能要自己去修改这个

1859
01:45:19,820 --> 01:45:21,770
编码器或者解码器

1860
01:45:24,060 --> 01:45:24,370
好

1861
01:45:24,380 --> 01:45:25,310
我们再看一下

1862
01:45:25,320 --> 01:45:28,840
就说刚才只是说讲一个半导体

1863
01:45:28,890 --> 01:45:31,230
从业就说做一个驱动开发

1864
01:45:31,240 --> 01:45:33,190
或者一个音音视频一个中间件

1865
01:45:33,200 --> 01:45:33,990
开发

1866
01:45:34,490 --> 01:45:37,380
然后对于互联网公司来说

1867
01:45:37,420 --> 01:45:40,720
主要是对这种音视频应用工程师

1868
01:45:40,760 --> 01:45:42,510
或者是一个刷卡工程师

1869
01:45:43,170 --> 01:45:46,340
或者这个流媒体服务器开发需求

1870
01:45:46,350 --> 01:45:47,320
比较多

1871
01:45:48,500 --> 01:45:51,160
当然这里是稍微简单讲解一下

1872
01:45:53,000 --> 01:45:57,170
大家有一些其他需求可以再提

1873
01:45:57,180 --> 01:45:57,770
一下

1874
01:46:03,250 --> 01:46:05,340
我们的课程大概就讲到这里

1875
01:46:05,350 --> 01:46:06,220
啊今晚的课程

1876
01:46:07,210 --> 01:46:08,260
谢谢大家

1877
01:46:18,720 --> 01:46:20,210
那我们现在先下课

1878
01:46:20,220 --> 01:46:23,440
如果要往期的视频可以找我们

1879
01:46:23,520 --> 01:46:24,970
嘉嘉老师要一下

1880
01:46:28,770 --> 01:46:30,770
我再发一下我们佳佳老师的一个

1881
01:46:30,780 --> 01:46:44,100
qq的

1882
01:46:51,220 --> 01:46:53,250
唉这个超极本

1883
01:46:53,420 --> 01:46:55,190
在录视频的时候

1884
01:46:55,670 --> 01:46:57,240
还是不太给力

1885
01:46:57,250 --> 01:46:58,400
经常卡通

1886
01:48:00,490 --> 01:48:00,860
嗯


